<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Flutte å®è·µå°ç»“</title>
    <url>/2020/04/03/Flutte-%E5%AE%9E%E8%B7%B5%E5%B0%8F%E7%BB%93/</url>
    <content><![CDATA[<p>å¥½ä¹…æ²¡æ›´æ–°äº†ï¼Œæœ€è¿‘å‘ç”Ÿäº†å¤ªå¤šçš„äº‹å„¿ï¼Œç–«æƒ…è¿˜æ²¡æœ‰è¿‡å»ï¼Œç›®å‰è¿˜åœ¨æ­¦æ±‰ï¼Œç›¸æ¯”è¾ƒ2ä¸ªæœˆå‰ç°åœ¨æ­¦æ±‰çš„æƒ…å†µå¥½å¤ªå¤šäº†ï¼Œè™½ç„¶æˆ‘å±…ä½å°åŒºè¿˜æ˜¯å°é”ä¸­ï¼Œè¿›å‡ºæ²¡é‚£ä¹ˆè‡ªç”±ï¼Œä½†äººä»¬å¿ƒé€æ¸çš„å¹³é™ä¸‹æ¥ï¼Œä¸å†ææ…Œå’Œæ‹…å¿§ã€‚æˆ‘ä¹Ÿé™ä¸‹å¿ƒæ¥å†™ç‚¹ä¸œè¥¿ï¼Œæœ€è¿‘ä¸€ä¸ªæœˆå†™äº†ä¸€äº›Flutterç›¸å…³çš„é¡¹ç›®ï¼Œé‡åˆ°çš„é—®é¢˜ä¸å°‘ï¼Œç´¢æ€§æ¥ä¸ªå°æ€»ç»“å§ï¼Œé‚£å°±åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šå¹²è´§ã€‚</p><a id="more"></a>
<ol>
<li>ListView æ’‘å¼€å‰©ä½™ç©ºé—´ï¼Œè¿™ä¸ªæ—¶å€™åœ¨å¤–é¢å¥—ä¸€ä¸ªExpandedå°±å¯ä»¥åšåˆ°äº†ã€‚å¦‚ä¸‹é¢è¿™ä¸ªå¼ å›¾é‡Œæ˜¾ç¤ºçš„ï¼š</li>
</ol>
<div style="align:left;">
<img width="220" src="/2020/04/03/Flutte-%E5%AE%9E%E8%B7%B5%E5%B0%8F%E7%BB%93/flutter_summary_01.jpeg">
</div>

<p>æ ¸å¿ƒä»£ç ï¼š</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Container(</span><br><span class="line">      color: TaskRecordTheme.VIEW_BG_COLOR,</span><br><span class="line">      padding: EdgeInsets.fromLTRB(<span class="number">20</span>, <span class="number">0</span>, <span class="number">20</span>, <span class="number">0</span>),</span><br><span class="line">      alignment: Alignment.topLeft,</span><br><span class="line">      child: Column(</span><br><span class="line">        mainAxisAlignment: MainAxisAlignment.start,</span><br><span class="line">        crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          <span class="comment">// ...</span></span><br><span class="line">          topicTitle(),</span><br><span class="line">          Expanded(</span><br><span class="line">            child: topicList(),</span><br><span class="line">          ),</span><br><span class="line">          commitBtn(),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><code>showModalBottomSheet</code> åº•éƒ¨å¼¹æ¡†çš„ä½¿ç”¨ï¼Œä»¥åŠç»™åº•éƒ¨å¼¹æ¡†åˆ‡åœ†è§’ï¼Œå¯ä»¥è¿™ä¹ˆåšï¼š</li>
</ol>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">showModalBottomSheet(</span><br><span class="line">        context: context,</span><br><span class="line">        <span class="comment">// ç‚¹å‡»èƒŒæ™¯è’™ç‰ˆæ˜¯å¦éœ€è¦å…³é—­å¼¹æ¡†ã€‚</span></span><br><span class="line">        isDismissible: <span class="keyword">false</span>,</span><br><span class="line">        <span class="comment">// æ˜¯å¦å¯ä»¥æ‹–æ‹½å¼¹æ¡†ã€‚</span></span><br><span class="line">        enableDrag: <span class="keyword">false</span>,</span><br><span class="line">        <span class="comment">// ç»™åº•éƒ¨å¼¹æ¡†å·¦ä¸Šæ–¹å’Œå³ä¸Šæ–¹åˆ‡åœ†è§’ã€‚</span></span><br><span class="line">        shape: RoundedRectangleBorder(</span><br><span class="line">          borderRadius: BorderRadius.only(</span><br><span class="line">              topLeft: Radius.circular(<span class="number">24</span>), </span><br><span class="line">              topRight: Radius.circular(<span class="number">24</span>)),</span><br><span class="line">        ),</span><br><span class="line">        builder: (BuildContext context) &#123;</span><br><span class="line">            <span class="comment">// è¿™é‡Œæ˜¯è‡ªå®šä¹‰çš„Widgetï¼Œç”¨æ¥æ˜¾ç¤ºå¼¹æ¡†é‡Œé¢çš„å†…å®¹ã€‚</span></span><br><span class="line">          <span class="keyword">return</span> RadioPicker(</span><br><span class="line">            start: () &#123;&#125;,</span><br><span class="line">            stop: () &#123;&#125;,</span><br><span class="line">            cancel: () &#123;&#125;,</span><br><span class="line">            title: recordDuration(),</span><br><span class="line">            data: vd,</span><br><span class="line">            dataArr: [],</span><br><span class="line">          );</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>
<p>å†æ¥çœ‹çœ‹æ•ˆæœï¼š</p>
<div style="align:left;">
<img width="220" src="/2020/04/03/Flutte-%E5%AE%9E%E8%B7%B5%E5%B0%8F%E7%BB%93/flutter_summary_02.jpeg">
</div>

<ol start="3">
<li>ç‚¹å‡»èƒŒæ™¯å…³é—­é”®ç›˜ï¼Œç”¨äºé¡µé¢æœ‰æ–‡æœ¬è¾“å…¥æ¡†è¦è¾“å…¥å†…å®¹æ—¶ï¼Œé”®ç›˜å¼¹èµ·æŒ¡ä½é¡µé¢å…¶å®ƒå†…å®¹ï¼ŒåŠ ä¸Šä¸€ä¸‹è¿™ä¸€å¥å°±OKäº†ã€‚</li>
</ol>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">GestureDetector(</span><br><span class="line">      behavior: HitTestBehavior.translucent,</span><br><span class="line">      onTap: () =&gt; FocusScope.of(context).requestFocus(FocusNode()),</span><br><span class="line">      child: Container());</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>è¾“å…¥æ¡†çš„å…‰æ ‡é—®é¢˜è§£å†³ï¼š</li>
</ol>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">TextField(</span><br><span class="line">    maxLines: <span class="number">3</span>,</span><br><span class="line">    scrollPadding: EdgeInsets.fromLTRB(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>),</span><br><span class="line">    expands: <span class="keyword">false</span>,</span><br><span class="line">    onChanged: (text) &#123;</span><br><span class="line">      _inputText = text</span><br><span class="line">    &#125;,</span><br><span class="line">    controller: TextEditingController.fromValue(</span><br><span class="line">      TextEditingValue(</span><br><span class="line">        text: _inputText,</span><br><span class="line">        selection: TextSelection.fromPosition(</span><br><span class="line">          TextPosition(</span><br><span class="line">            affinity: TextAffinity.downstream,</span><br><span class="line">            offset: _inputText.length</span><br><span class="line">          )</span><br><span class="line">        )</span><br><span class="line">      )</span><br><span class="line">    ), <span class="comment">// è¿™é‡Œè¦æ›´æ–°å…‰æ ‡çš„åç§»ä½ç½®</span></span><br><span class="line">    decoration: InputDecoration(</span><br><span class="line">        contentPadding: EdgeInsets.fromLTRB(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>),</span><br><span class="line">        hintText: <span class="string">"è¯·è¾“å…¥ä½œä¸šé¡¹"</span>,</span><br><span class="line">        hintStyle: TextStyle(fontSize: <span class="number">15</span>, color: Color(<span class="number">0xFF808080</span>)),</span><br><span class="line">        border: InputBorder.none),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>çˆ¶ç»„ä»¶åŠ¨æ€æ›´æ–°å­ç»„ä»¶æ˜¾ç¤ºçš„å†…å®¹ï¼Œæˆ‘è¿™é‡Œæ˜¯æ›´æ–°åº•éƒ¨å¼¹æ¡†çš„å†…å®¹ï¼Œä½¿ç”¨çš„æ˜¯ <code>ValueNotifier</code>ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</li>
</ol>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ValueNotifierData</span> <span class="keyword">extends</span> <span class="title">ValueNotifier</span>&lt;<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">  ValueNotifierData(value) : <span class="keyword">super</span>(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å­ç»„ä»¶ä¸­çš„ä»£ç ï¼š</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RadioPicker</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  ValueNotifierData data;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _RadioPickerState createState() =&gt; _RadioPickerState();</span><br><span class="line"></span><br><span class="line">  RadioPicker(&#123;Key key, <span class="keyword">this</span>.data&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_RadioPickerState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">RadioPicker</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> title;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    widget.data.addListener(_handleValueChanged);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _handleValueChanged() &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      title = widget.data.value;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çˆ¶ç»„ä»¶ä¸­åŠ¨æ€å»ä¿®æ”¹ï¼š</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_ListenTaskPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">ListenTaskPage</span>&gt; </span>&#123;</span><br><span class="line">  ValueNotifierData vd = ValueNotifierData(<span class="string">'00:00:00'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_ListenTaskPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">ListenTaskPage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _start() <span class="keyword">async</span> &#123;</span><br><span class="line">    vd.value = <span class="string">"xxxxxx"</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> recordMp3() &#123;</span><br><span class="line">    showModalBottomSheet(</span><br><span class="line">        context: context,</span><br><span class="line">        isDismissible: <span class="keyword">false</span>,</span><br><span class="line">        builder: (BuildContext context) &#123;</span><br><span class="line">          <span class="keyword">return</span> RadioPicker(</span><br><span class="line">                    data: vd,</span><br><span class="line">          );</span><br><span class="line">    &#125;);  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>å…¨å±€é€šçŸ¥äº‹ä»¶ï¼š<code>ChangeNotifier</code>ï¼Œä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œ</li>
</ol>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/<span class="emphasis">***</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>ç”¨æ¥æ›´æ–°å­¦ç”Ÿæ•°æ®ï¼Œç›®å‰ç”¨åœ¨äº†ç­çº§è¯¦æƒ…æ›´æ–°å­¦ç”Ÿçš„è§’æ ‡(ä»»åŠ¡çš„ä¸ªæ•°)</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>è·å–æ•°æ®ï¼šProvider.of<span class="xml"><span class="tag">&lt;<span class="name">NotificationProvider</span>&gt;</span></span>(context).studentID</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>æ›´æ–°æ•°æ®ï¼šProvider.of<span class="xml"><span class="tag">&lt;<span class="name">NotificationProvider</span>&gt;</span></span>(context).updateStudentData("å­¦ç”ŸID", 1);</span></span></span><br><span class="line"><span class="comment"><span class="markdown"> */</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NotificationProvider</span> <span class="title">with</span> <span class="title">ChangeNotifier</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> studentID;</span><br><span class="line">  <span class="built_in">int</span> dotCount;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ›´æ–°å­¦ç”Ÿçš„è§’æ ‡(ä»»åŠ¡çš„ä¸ªæ•°)</span></span></span><br><span class="line">  <span class="keyword">void</span> updateStudentData(<span class="built_in">String</span> studentID, <span class="built_in">int</span> dotCount) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.studentID = studentID;</span><br><span class="line">    <span class="keyword">this</span>.dotCount = dotCount;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šçŸ¥ç›‘å¬è€…æ›´æ–°ç•Œé¢</span></span><br><span class="line">    notifyListeners();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶åˆ«å¿˜äº†åœ¨ <code>main()</code> å‡½æ•°é‡Œé¢åŠ ä¸€ä¸‹ï¼Œ <code>ChangeNotifierProvider</code> å¥—ä¸Šï¼š</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  runApp(MultiProvider(</span><br><span class="line">      providers: [</span><br><span class="line">        ChangeNotifierProvider(create: (_)&#123;</span><br><span class="line">          <span class="keyword">return</span> NotificationProvider();</span><br><span class="line">        &#125;),</span><br><span class="line">      ],</span><br><span class="line">      child: MyApp(),</span><br><span class="line">    ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>å’ŒåŸç”Ÿè¿›è¡Œé€šä¿¡(<code>Channel</code>), åœ¨flutterä»£ç é‡Œæ‰“å¼€ iOS åŸç”ŸApple Music ä¸ºä¾‹ï¼š</li>
</ol>
<p><code>dart</code> ä»£ç å®ç°ï¼š</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (Platform.isIOS) &#123;</span><br><span class="line">   <span class="keyword">const</span> platform = <span class="keyword">const</span> MethodChannel(<span class="string">'joewang'</span>);</span><br><span class="line">   <span class="keyword">var</span> result;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">     result = <span class="keyword">await</span> platform.invokeMethod(<span class="string">'openMedia'</span>);</span><br><span class="line">     <span class="built_in">print</span>(result);</span><br><span class="line">     <span class="keyword">return</span> Future.value(result);</span><br><span class="line">   &#125; <span class="keyword">on</span> PlatformException <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">     <span class="keyword">return</span> Future.error(e.toString());</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>iOS åŸç”Ÿä»£ç ï¼ˆOCï¼‰å®ç°ï¼š</p>
<p><code>.h</code> æ–‡ä»¶ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Flutter/Flutter.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;MediaPlayer/MediaPlayer.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NS_ASSUME_NONNULL_BEGIN</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">FlutterNativePlugin</span> : <span class="title">NSObject</span>&lt;<span class="title">FlutterPlugin</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NS_ASSUME_NONNULL_END</span></span><br></pre></td></tr></table></figure>

<p><code>.m</code> æ–‡ä»¶ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"FlutterNativePlugin.h"</span></span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">FlutterNativePlugin</span>() &lt;<span class="title">UIImagePickerControllerDelegate</span>, <span class="title">MPMediaPickerControllerDelegate</span>&gt;</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">UIViewController</span> *viewController;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">MPMediaPickerController</span> *audioPickerController;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">FlutterNativePlugin</span></span></span><br><span class="line"></span><br><span class="line">+ (<span class="keyword">void</span>)registerWithRegistrar:(<span class="built_in">NSObject</span>&lt;FlutterPluginRegistrar&gt; *)registrar &#123;</span><br><span class="line">    FlutterMethodChannel *channel = [FlutterMethodChannel methodChannelWithName:<span class="string">@"joewang"</span> binaryMessenger:[registrar messenger]];</span><br><span class="line">    <span class="built_in">UIViewController</span> *viewController = [<span class="built_in">UIApplication</span> sharedApplication].delegate.window.rootViewController;</span><br><span class="line">    FlutterNativePlugin *instance = [[FlutterNativePlugin alloc]initWithViewController:viewController];</span><br><span class="line">    [registrar addMethodCallDelegate:instance channel:channel];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithViewController:(<span class="built_in">UIViewController</span> *)viewController &#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.viewController = viewController;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)handleMethodCall:(FlutterMethodCall *)call result:(FlutterResult)result &#123;</span><br><span class="line">  <span class="keyword">if</span> ([call.method isEqualToString:<span class="string">@"openMedia"</span>]) &#123;</span><br><span class="line">    <span class="keyword">self</span>.audioPickerController = [[<span class="built_in">MPMediaPickerController</span> alloc] initWithMediaTypes:<span class="built_in">MPMediaTypeMusic</span>];</span><br><span class="line">    <span class="keyword">self</span>.audioPickerController.delegate = <span class="keyword">self</span>;</span><br><span class="line">    <span class="keyword">self</span>.audioPickerController.showsCloudItems = <span class="literal">NO</span>;</span><br><span class="line">    <span class="keyword">self</span>.audioPickerController.allowsPickingMultipleItems = <span class="literal">NO</span>;</span><br><span class="line">    <span class="keyword">self</span>.audioPickerController.modalPresentationStyle = <span class="built_in">UIModalPresentationCurrentContext</span>;</span><br><span class="line">    [<span class="keyword">self</span>.viewController presentViewController:<span class="keyword">self</span>.audioPickerController animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æµ‹è¯•çš„æ—¶å€™è®°å¾—iPhoneè¦å®‰è£… Apple Music Appå“¦ï¼Œæœ¬äººæ›¾é‡åˆ°è¿‡ï¼Œè¿˜èŠ±äº†åŠå¤©çš„æ—¶é—´æ‰¾åŸå› ã€‚</p>
</blockquote>
]]></content>
  </entry>
  <entry>
    <title>bundle install å¼•å‘çš„æŠ¥é”™é—®é¢˜</title>
    <url>/2019/12/04/bundle-install-error/</url>
    <content><![CDATA[<p>æœ€è¿‘å°† Mac ç³»ç»Ÿå’Œ Xcode æ›´æ–°åˆ°äº†æœ€æ–°çš„ç‰ˆæœ¬ï¼ŒMac ç³»ç»Ÿä¸º macOS Catalina 10.15.1ï¼ŒXcode æœ€æ–°ç‰ˆæœ¬ä¸º11.2.1ã€‚å½“æˆ‘ pod install åæŠ¥é”™å¦‚ä¸‹ï¼š</p><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"> wdy î‚° ~<span class="regexp">/Desktop/workspace</span><span class="regexp">/peoject î‚° pod install</span></span><br><span class="line"><span class="regexp">Could not find proper version of cocoapods (1.7.5) in any of the sources</span></span><br><span class="line"><span class="regexp">Run `bundle install` to install missing gems.</span></span><br></pre></td></tr></table></figure><a id="more"></a>


<p>å†æ‰§è¡Œ bundle install</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"> âœ˜ wdy î‚° ~<span class="regexp">/Desktop/workspace</span><span class="regexp">/peoject î‚° sudo bundle install</span></span><br><span class="line"><span class="regexp">Password:</span></span><br><span class="line"><span class="regexp">Don't run Bundler as root. Bundler can ask for sudo if it is needed, and installing your bundle as root will break this</span></span><br><span class="line"><span class="regexp">application for all non-root users on this machine.</span></span><br><span class="line"><span class="regexp">Warning: the running version of Bundler (1.17.2) is older than the version that created the lockfile (1.17.3). We suggest you upgrade to the latest version of Bundler by running `gem install bundler`.</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">Fetching source index from https:/</span><span class="regexp">/gems.ruby-china.org/</span></span><br><span class="line"></span><br><span class="line">Retrying fetcher due to error (<span class="number">2</span>/<span class="number">4</span>): Bundler::HTTPError Could <span class="keyword">not</span> fetch specs from <span class="symbol">https:</span>/<span class="regexp">/gems.ruby-china.org/</span></span><br><span class="line">Retrying fetcher due to error (<span class="number">3</span>/<span class="number">4</span>): Bundler::HTTPError Could <span class="keyword">not</span> fetch specs from <span class="symbol">https:</span>/<span class="regexp">/gems.ruby-china.org/</span></span><br><span class="line">Retrying fetcher due to error (<span class="number">4</span>/<span class="number">4</span>): Bundler::HTTPError Could <span class="keyword">not</span> fetch specs from <span class="symbol">https:</span>/<span class="regexp">/gems.ruby-china.org/</span></span><br><span class="line">Could <span class="keyword">not</span> fetch specs from <span class="symbol">https:</span>/<span class="regexp">/gems.ruby-china.org/</span></span><br></pre></td></tr></table></figure>

<p>è¿˜æ˜¯æŠ¥é”™ï¼Œéš¾é“æˆ‘çš„ gem æºä¸å¯¹ï¼Ÿå»<a href="https://gems.ruby-china.com/" target="_blank" rel="noopener">å®˜ç½‘</a>çœ‹äº†ä¹‹åï¼Œå‘ç°å·²ç»ç”±åŸæ¥çš„ <code>https://gems.ruby-china.org/</code> æ”¹æˆäº† <code>https://gems.ruby-china.com/</code>ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">âœ˜ wdy î‚° ~<span class="regexp">/Desktop/workspace</span><span class="regexp">/peoject î‚° gem sources --add https:/</span><span class="regexp">/gems.ruby-china.com/</span> --remove <span class="symbol">https:</span>/<span class="regexp">/gems.ruby-china.org/</span></span><br><span class="line">source <span class="symbol">https:</span>/<span class="regexp">/gems.ruby-china.com/</span> already present <span class="keyword">in</span> the cache</span><br><span class="line">source <span class="symbol">https:</span>/<span class="regexp">/gems.ruby-china.org/</span> <span class="keyword">not</span> present <span class="keyword">in</span> cache</span><br><span class="line"> wdy î‚° ~<span class="regexp">/Desktop/workspace</span><span class="regexp">/peoject î‚° gem sources -l</span></span><br><span class="line"><span class="regexp">*** CURRENT SOURCES ***</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">https:/</span><span class="regexp">/gems.ruby-china.com/</span></span><br></pre></td></tr></table></figure>

<p>å†æ‰§è¡Œ bundle install è¿˜æ˜¯æŠ¥åŒæ ·çš„é”™ï¼Œå¿˜äº†è¿˜éœ€è¦è®¾ç½® bundle config</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">bundle config mirror.<span class="symbol">https:</span>/<span class="regexp">/gems.ruby-china.org https:/</span><span class="regexp">/gems.ruby-china.com</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šé…ç½®å¥½äº†ä¹‹åï¼Œæ‰§è¡Œ bundle install ä¼šæŠ¥å¦å¤–ä¸€ä¸ªé”™ï¼Œ</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"> wdy î‚° ~<span class="regexp">/Desktop/workspace</span><span class="regexp">/peoject î‚° sudo bundle install</span></span><br><span class="line"><span class="regexp">Don't run Bundler as root. Bundler can ask for sudo if it is needed, and installing your bundle as root will break</span></span><br><span class="line"><span class="regexp">this application for all non-root users on this machine.</span></span><br><span class="line"><span class="regexp">Warning: the running version of Bundler (1.17.2) is older than the version that created the lockfile (1.17.3). We suggest you upgrade to the latest version of Bundler by running `gem install bundler`.</span></span><br><span class="line"><span class="regexp">Fetching gem metadata from https:/</span><span class="regexp">/gems.ruby-china.com/</span>........</span><br><span class="line">Fetching CFPropertyList <span class="number">3.0</span>.<span class="number">1</span></span><br><span class="line">Installing CFPropertyList <span class="number">3.0</span>.<span class="number">1</span></span><br><span class="line">Using concurrent-ruby <span class="number">1.1</span>.<span class="number">5</span></span><br><span class="line">Using i18n <span class="number">0</span>.<span class="number">9.5</span></span><br><span class="line">Fetching minitest <span class="number">5.8</span>.<span class="number">5</span></span><br><span class="line">Installing minitest <span class="number">5.8</span>.<span class="number">5</span></span><br><span class="line">Using thread_safe <span class="number">0</span>.<span class="number">3.6</span></span><br><span class="line">Using tzinfo <span class="number">1.2</span>.<span class="number">5</span></span><br><span class="line">Using activesupport <span class="number">4.2</span>.<span class="number">11.1</span></span><br><span class="line">Using public_suffix <span class="number">2.0</span>.<span class="number">5</span></span><br><span class="line">Using addressable <span class="number">2.7</span>.<span class="number">0</span></span><br><span class="line">Using atomos <span class="number">0</span>.<span class="number">1.3</span></span><br><span class="line">Fetching babosa <span class="number">1.0</span>.<span class="number">3</span></span><br><span class="line">Installing babosa <span class="number">1.0</span>.<span class="number">3</span></span><br><span class="line">Using bundler <span class="number">1.17</span>.<span class="number">2</span></span><br><span class="line">Fetching claide <span class="number">1.0</span>.<span class="number">3</span></span><br><span class="line">Installing claide <span class="number">1.0</span>.<span class="number">3</span></span><br><span class="line">Using fuzzy_match <span class="number">2.0</span>.<span class="number">4</span></span><br><span class="line">Using nap <span class="number">1.1</span>.<span class="number">0</span></span><br><span class="line">Fetching cocoapods-core <span class="number">1.7</span>.<span class="number">5</span></span><br><span class="line">Installing cocoapods-core <span class="number">1.7</span>.<span class="number">5</span></span><br><span class="line">Using cocoapods-deintegrate <span class="number">1.0</span>.<span class="number">4</span></span><br><span class="line">Using cocoapods-downloader <span class="number">1.2</span>.<span class="number">2</span></span><br><span class="line">Using cocoapods-plugins <span class="number">1.0</span>.<span class="number">0</span></span><br><span class="line">Using cocoapods-search <span class="number">1.0</span>.<span class="number">0</span></span><br><span class="line">Using cocoapods-stats <span class="number">1.1</span>.<span class="number">0</span></span><br><span class="line">Using netrc <span class="number">0</span>.<span class="number">11.0</span></span><br><span class="line">Fetching cocoapods-trunk <span class="number">1.4</span>.<span class="number">0</span></span><br><span class="line">Installing cocoapods-trunk <span class="number">1.4</span>.<span class="number">0</span></span><br><span class="line">Using cocoapods-try <span class="number">1.1</span>.<span class="number">0</span></span><br><span class="line">Using colored2 <span class="number">3.1</span>.<span class="number">2</span></span><br><span class="line">Using escape <span class="number">0</span>.<span class="number">0</span>.<span class="number">4</span></span><br><span class="line">Using fourflusher <span class="number">2.3</span>.<span class="number">1</span></span><br><span class="line">Using gh_inspector <span class="number">1.1</span>.<span class="number">3</span></span><br><span class="line">Using molinillo <span class="number">0</span>.<span class="number">6.6</span></span><br><span class="line">Using ruby-macho <span class="number">1.4</span>.<span class="number">0</span></span><br><span class="line">Using nanaimo <span class="number">0</span>.<span class="number">2.6</span></span><br><span class="line">Fetching xcodeproj <span class="number">1.12</span>.<span class="number">0</span></span><br><span class="line">Installing xcodeproj <span class="number">1.12</span>.<span class="number">0</span></span><br><span class="line">Fetching cocoapods <span class="number">1.7</span>.<span class="number">5</span></span><br><span class="line">Installing cocoapods <span class="number">1.7</span>.<span class="number">5</span></span><br><span class="line">Using colored <span class="number">1.2</span></span><br><span class="line">Using highline <span class="number">1.7</span>.<span class="number">10</span></span><br><span class="line">Using commander-fastlane <span class="number">4.4</span>.<span class="number">6</span></span><br><span class="line">Using declarative <span class="number">0</span>.<span class="number">0</span>.<span class="number">10</span></span><br><span class="line">Using declarative-option <span class="number">0</span>.<span class="number">1.0</span></span><br><span class="line">Using digest-crc <span class="number">0</span>.<span class="number">4.1</span></span><br><span class="line">Using unf_ext <span class="number">0</span>.<span class="number">0</span>.<span class="number">7.6</span></span><br><span class="line">Using unf <span class="number">0</span>.<span class="number">1.4</span></span><br><span class="line">Using domain_name <span class="number">0</span>.<span class="number">5.20190701</span></span><br><span class="line">Using dotenv <span class="number">2.7</span>.<span class="number">5</span></span><br><span class="line">Using emoji_regex <span class="number">1.0</span>.<span class="number">1</span></span><br><span class="line">Fetching excon <span class="number">0</span>.<span class="number">67.0</span></span><br><span class="line">Installing excon <span class="number">0</span>.<span class="number">67.0</span></span><br><span class="line">Using multipart-post <span class="number">2.0</span>.<span class="number">0</span></span><br><span class="line">Using faraday <span class="number">0</span>.<span class="number">15.4</span></span><br><span class="line">Using http-cookie <span class="number">1.0</span>.<span class="number">3</span></span><br><span class="line">Using faraday-cookie_jar <span class="number">0</span>.<span class="number">0</span>.<span class="number">6</span></span><br><span class="line">Using faraday_middleware <span class="number">0</span>.<span class="number">13.1</span></span><br><span class="line">Fetching fastimage <span class="number">2.1</span>.<span class="number">7</span></span><br><span class="line">Installing fastimage <span class="number">2.1</span>.<span class="number">7</span></span><br><span class="line">Using jwt <span class="number">2.1</span>.<span class="number">0</span></span><br><span class="line">Using memoist <span class="number">0</span>.<span class="number">16.0</span></span><br><span class="line">Using multi_json <span class="number">1.13</span>.<span class="number">1</span></span><br><span class="line">Using os <span class="number">1.0</span>.<span class="number">1</span></span><br><span class="line">Using signet <span class="number">0</span>.<span class="number">11.0</span></span><br><span class="line">Using googleauth <span class="number">0</span>.<span class="number">6.7</span></span><br><span class="line">Using httpclient <span class="number">2.8</span>.<span class="number">3</span></span><br><span class="line">Using mime-types-data <span class="number">3.2019</span>.0904</span><br><span class="line">Using mime-types <span class="number">3.3</span></span><br><span class="line">Using uber <span class="number">0</span>.<span class="number">1.0</span></span><br><span class="line">Using representable <span class="number">3.0</span>.<span class="number">4</span></span><br><span class="line">Using retriable <span class="number">3.1</span>.<span class="number">2</span></span><br><span class="line">Using google-api-client <span class="number">0</span>.<span class="number">23.9</span></span><br><span class="line">Using google-cloud-env <span class="number">1.2</span>.<span class="number">1</span></span><br><span class="line">Using google-cloud-core <span class="number">1.3</span>.<span class="number">1</span></span><br><span class="line">Using google-cloud-storage <span class="number">1.16</span>.<span class="number">0</span></span><br><span class="line">Fetching json <span class="number">2.2</span>.<span class="number">0</span></span><br><span class="line">Installing json <span class="number">2.2</span>.<span class="number">0</span> with native extensions</span><br><span class="line">Gem::Ext::<span class="symbol">BuildError:</span> <span class="symbol">ERROR:</span> Failed to build gem native extension.</span><br><span class="line"></span><br><span class="line">    current <span class="symbol">directory:</span> /Users/wdy/.rvm/rubies/ruby-<span class="number">2.6</span>.<span class="number">0</span>/lib/ruby/gems/<span class="number">2.6</span>.<span class="number">0</span>/gems/json-<span class="number">2.2</span>.<span class="number">0</span>/ext/json/ext/generator</span><br><span class="line">/Users/wdy/.rvm/rubies/ruby-<span class="number">2.6</span>.<span class="number">0</span>/bin/ruby -I /Users/wdy/.rvm/rubies/ruby-<span class="number">2.6</span>.<span class="number">0</span>/lib/ruby/<span class="number">2.6</span>.<span class="number">0</span> -r</span><br><span class="line">./siteconf20191204-<span class="number">12343</span>-<span class="number">1</span>w3gnyc.rb extconf.rb</span><br><span class="line">creating Makefile</span><br><span class="line"></span><br><span class="line">current <span class="symbol">directory:</span> /Users/wdy/.rvm/rubies/ruby-<span class="number">2.6</span>.<span class="number">0</span>/lib/ruby/gems/<span class="number">2.6</span>.<span class="number">0</span>/gems/json-<span class="number">2.2</span>.<span class="number">0</span>/ext/json/ext/generator</span><br><span class="line">make <span class="string">"DESTDIR="</span> clean</span><br><span class="line"></span><br><span class="line">current <span class="symbol">directory:</span> /Users/wdy/.rvm/rubies/ruby-<span class="number">2.6</span>.<span class="number">0</span>/lib/ruby/gems/<span class="number">2.6</span>.<span class="number">0</span>/gems/json-<span class="number">2.2</span>.<span class="number">0</span>/ext/json/ext/generator</span><br><span class="line">make <span class="string">"DESTDIR="</span></span><br><span class="line">compiling generator.c</span><br><span class="line">linking shared-object json/ext/generator.bundle</span><br><span class="line"><span class="symbol">ld:</span> <span class="symbol">warning:</span> directory <span class="keyword">not</span> found <span class="keyword">for</span> option <span class="string">'-L/usr/local/opt/libksba/lib'</span></span><br><span class="line"><span class="symbol">ld:</span> <span class="symbol">warning:</span> directory <span class="keyword">not</span> found <span class="keyword">for</span> option <span class="string">'-L/usr/local/opt/libksba/lib'</span></span><br><span class="line"><span class="symbol">ld:</span> <span class="symbol">warning:</span> directory <span class="keyword">not</span> found <span class="keyword">for</span> option <span class="string">'-L/usr/local/opt/libksba/lib'</span></span><br><span class="line"></span><br><span class="line">current <span class="symbol">directory:</span> /Users/wdy/.rvm/rubies/ruby-<span class="number">2.6</span>.<span class="number">0</span>/lib/ruby/gems/<span class="number">2.6</span>.<span class="number">0</span>/gems/json-<span class="number">2.2</span>.<span class="number">0</span>/ext/json/ext/generator</span><br><span class="line">make <span class="string">"DESTDIR="</span> install</span><br><span class="line"><span class="symbol">make:</span> /usr/local/opt/coreutils/bin/<span class="symbol">gmkdir:</span> No such file <span class="keyword">or</span> directory</span><br><span class="line"><span class="symbol">make:</span> *** [.sitearchdir.-.json.-.ext.time] Error <span class="number">1</span></span><br><span class="line"></span><br><span class="line">make install failed, exit code <span class="number">2</span></span><br><span class="line"></span><br><span class="line">Gem files will remain installed <span class="keyword">in</span> /Users/wdy/.rvm/rubies/ruby-<span class="number">2.6</span>.<span class="number">0</span>/lib/ruby/gems/<span class="number">2.6</span>.<span class="number">0</span>/gems/json-<span class="number">2.2</span>.<span class="number">0</span> <span class="keyword">for</span></span><br><span class="line">inspection.</span><br><span class="line">Results logged to</span><br><span class="line">/Users/wdy/.rvm/rubies/ruby-<span class="number">2.6</span>.<span class="number">0</span>/lib/ruby/gems/<span class="number">2.6</span>.<span class="number">0</span>/extensions/x86_64-darwin-<span class="number">18</span>/<span class="number">2.6</span>.<span class="number">0</span>/json-<span class="number">2.2</span>.<span class="number">0</span>/gem_make.out</span><br><span class="line"></span><br><span class="line">An error occurred <span class="keyword">while</span> installing json (<span class="number">2.2</span>.<span class="number">0</span>), <span class="keyword">and</span> Bundler cannot continue.</span><br><span class="line">Make sure that <span class="string">`gem install json -v '2.2.0' --source 'https://rubygems.org/'`</span> succeeds before bundling.</span><br><span class="line"></span><br><span class="line">In <span class="symbol">Gemfile:</span></span><br><span class="line">  fastlane-plugin-firim was resolved to <span class="number">0</span>.<span class="number">2.0</span>, which depends on</span><br><span class="line">    firim was resolved to <span class="number">0</span>.<span class="number">2.1</span>, which depends on</span><br><span class="line">      fastlane was resolved to <span class="number">2.131</span>.<span class="number">0</span>, which depends on</span><br><span class="line">        json</span><br></pre></td></tr></table></figure>

<p>å¥½åƒæ˜¯å®‰è£… <code>json 2.2.0</code> çš„æ—¶å€™å¤±è´¥äº†ï¼Œéœ€è¦å•ç‹¬å®‰è£…ä¸€ä¸‹ï¼Œé‚£å°±æŒ‰æç¤ºæ¥ï¼Œæ‰§è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">  wdy î‚° ~<span class="regexp">/Desktop/workspace</span><span class="regexp">/peoject î‚° sudo gem install json -v '2.2.0' --source 'https:/</span><span class="regexp">/rubygems.org/</span><span class="string">'</span></span><br><span class="line"><span class="string">Building native extensions. This could take a while...</span></span><br><span class="line"><span class="string">ERROR:  Error installing json:</span></span><br><span class="line"><span class="string">	ERROR: Failed to build gem native extension.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    current directory: /Users/wdy/.rvm/rubies/ruby-2.6.0/lib/ruby/gems/2.6.0/gems/json-2.2.0/ext/json/ext/generator</span></span><br><span class="line"><span class="string">/Users/wdy/.rvm/rubies/ruby-2.6.0/bin/ruby -I /Users/wdy/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0 -r ./siteconf20191204-12556-140ytz4.rb extconf.rb</span></span><br><span class="line"><span class="string">creating Makefile</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">current directory: /Users/wdy/.rvm/rubies/ruby-2.6.0/lib/ruby/gems/2.6.0/gems/json-2.2.0/ext/json/ext/generator</span></span><br><span class="line"><span class="string">make "DESTDIR=" clean</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">current directory: /Users/wdy/.rvm/rubies/ruby-2.6.0/lib/ruby/gems/2.6.0/gems/json-2.2.0/ext/json/ext/generator</span></span><br><span class="line"><span class="string">make "DESTDIR="</span></span><br><span class="line"><span class="string">compiling generator.c</span></span><br><span class="line"><span class="string">linking shared-object json/ext/generator.bundle</span></span><br><span class="line"><span class="string">ld: warning: directory not found for option '</span>-L/usr/local/opt/libksba/lib<span class="string">'</span></span><br><span class="line"><span class="string">ld: warning: directory not found for option '</span>-L/usr/local/opt/libksba/lib<span class="string">'</span></span><br><span class="line"><span class="string">ld: warning: directory not found for option '</span>-L/usr/local/opt/libksba/lib<span class="string">'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">current directory: /Users/wdy/.rvm/rubies/ruby-2.6.0/lib/ruby/gems/2.6.0/gems/json-2.2.0/ext/json/ext/generator</span></span><br><span class="line"><span class="string">make "DESTDIR=" install</span></span><br><span class="line"><span class="string">make: /usr/local/opt/coreutils/bin/gmkdir: No such file or directory</span></span><br><span class="line"><span class="string">make: *** [.sitearchdir.-.json.-.ext.time] Error 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">make install failed, exit code 2</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Gem files will remain installed in /Users/wdy/.rvm/rubies/ruby-2.6.0/lib/ruby/gems/2.6.0/gems/json-2.2.0 for inspection.</span></span><br><span class="line"><span class="string">Results logged to /Users/wdy/.rvm/rubies/ruby-2.6.0/lib/ruby/gems/2.6.0/extensions/x86_64-darwin-18/2.6.0/json-2.2.0/gem_make.out</span></span><br></pre></td></tr></table></figure>

<p>è¿˜æ˜¯å¤±è´¥ï¼Œåœ¨ç¬¬23è¡Œç»™çš„é”™è¯¯æç¤º <code>/usr/local/opt/coreutils/bin/gmkdir</code> è¿™ä¸ªç›®å½•æ‰¾ä¸åˆ°ï¼Œç½‘ä¸ŠæŸ¥äº†ä¹‹åï¼Œéœ€è¦ç”¨ brew å®‰è£… <code>coreutils</code>ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">  wdy î‚° ~<span class="regexp">/Desktop/workspace</span><span class="regexp">/peoject î‚° brew install coreutils</span></span><br><span class="line"><span class="regexp">Updating Homebrew...</span></span><br><span class="line"><span class="regexp">==&gt; Downloading https:/</span><span class="regexp">/homebrew.bintray.com/bottles</span><span class="regexp">/coreutils-8.31.catalina.bottle.1.tar.gz</span></span><br><span class="line"><span class="regexp">==&gt; Downloading from https:/</span><span class="regexp">/akamai.bintray.com/</span><span class="number">72</span>/<span class="number">7262</span>e4c76483ea796454db828c25955be1e6b2bc8e056ba1dd6e92bfe1118da5?<span class="number">_</span></span><br><span class="line"><span class="comment">######################################################################## 100.0%</span></span><br><span class="line">==&gt; Pouring coreutils-<span class="number">8.31</span>.catalina.bottle.<span class="number">1</span>.tar.gz</span><br><span class="line">==&gt; Caveats</span><br><span class="line">Commands also provided by macOS have been installed with the prefix <span class="string">"g"</span>.</span><br><span class="line">If you need to use these commands with their normal names, you</span><br><span class="line">can add a <span class="string">"gnubin"</span> directory to your PATH from your bashrc <span class="symbol">like:</span></span><br><span class="line">  PATH=<span class="string">"/usr/local/opt/coreutils/libexec/gnubin:$PATH"</span></span><br><span class="line">==&gt; Summary</span><br><span class="line">ğŸº  /usr/local/Cellar/coreutils/<span class="number">8.31</span>: <span class="number">476</span> files, <span class="number">9.2</span>MB</span><br><span class="line">==&gt; <span class="string">`brew cleanup`</span> has <span class="keyword">not</span> been run <span class="keyword">in</span> <span class="number">30</span> days, running now...</span><br></pre></td></tr></table></figure>

<p>æˆåŠŸä¹‹åå†å»å®‰è£…é‚£ä¸ª <code>json</code>ï¼Œå®Œæ•´çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"> wdy î‚° ~<span class="regexp">/Desktop/workspace</span><span class="regexp">/peoject î‚° sudo gem install json -v '2.2.0' -n /usr</span><span class="regexp">/local/bin</span><span class="regexp">/</span></span><br><span class="line"><span class="regexp">Password:</span></span><br><span class="line"><span class="regexp">Building native extensions. This could take a while...</span></span><br><span class="line"><span class="regexp">Successfully installed json-2.2.0</span></span><br><span class="line"><span class="regexp">Parsing documentation for json-2.2.0</span></span><br><span class="line"><span class="regexp">Installing ri documentation for json-2.2.0</span></span><br><span class="line"><span class="regexp">Done installing documentation for json after 1 seconds</span></span><br><span class="line"><span class="regexp">1 gem installed</span></span><br></pre></td></tr></table></figure>

<p>æœ€åå†å»æ‰§è¡Œ <code>bundle install</code> å°±æ²¡æœ‰æŠ¥é”™äº†ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
  </entry>
  <entry>
    <title>iOSç­¾åæœºåˆ¶</title>
    <url>/2019/11/18/encrypt-and-decrypt/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘ä¸€ç›´åœ¨ç ”ç©¶iOSé‡ç­¾åçš„ä¸€äº›ä¸œè¥¿ï¼Œä¹Ÿæ˜¯å¯¹è‹¹æœè¶…çº§ç­¾åæœºåˆ¶çš„ä¸€æ¬¡é‡æ–°å­¦ä¹ ï¼ˆä¹‹å‰åªæ˜¯äº†è§£ï¼‰ï¼Œè€Œåœ¨è¿™ä¹‹å‰å…ˆæ¥è¿‡ä¸€éåŠ å¯†è§£å¯†æ•°å­—ç­¾åç­‰çŸ¥è¯†ï¼Œä¸‹å›¾æ˜¯æ•´ä¸ªå­¦ä¹ è¿‡ç¨‹ï¼š</p><p><img src="/2019/11/18/encrypt-and-decrypt/encrypt-and-decrypt_01.png" alt></p><p>å¯†ç å­¦ä¸»è¦è§£å†³å››ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šæœºå¯†æ€§ï¼ˆéšç§æ€§ï¼‰ã€å®Œæ•´æ€§ã€èº«ä»½éªŒè¯ã€ä¸å¯æŠµèµ–æ€§ï¼Œç»å…¸çš„å¯†ç å­¦ç®—æ³•æœ‰å¯¹ç§°åŠ å¯†ç®—æ³• ã€å…¬å¼€å¯†é’¥ç®—æ³•ç­‰ï¼Œè€Œæ¯ä¸€ä¸ªå¯†ç å­¦ç®—æ³•æ˜¯ä¸ºäº†è§£å†³å“ªäº›é—®é¢˜ï¼Œè¿˜æœ‰å“ªäº›ä¸è¶³ï¼Œä¸‹é¢æ¥é€ä¸ªåˆ†æä¸€ä¸‹</p><a id="more"></a>


<h2 id="å¯¹ç§°åŠ å¯†ç®—æ³•"><a href="#å¯¹ç§°åŠ å¯†ç®—æ³•" class="headerlink" title="å¯¹ç§°åŠ å¯†ç®—æ³•"></a>å¯¹ç§°åŠ å¯†ç®—æ³•</h2><p>ä»€ä¹ˆæ˜¯å¯¹ç§°åŠ ç®—æ³•å‘¢ï¼Ÿ ä¸€èˆ¬æ˜¯é€šè¿‡ä¸€ä¸ªç®—æ³•å’Œä¸€ä¸ªå¯†é’¥ï¼ˆsecret keyï¼‰å¯¹æ˜æ–‡ï¼ˆplaintextï¼‰è¿›è¡Œå¤„ç†ï¼Œå¾—åˆ°çš„ä¸è§„åˆ™å­—ç¬¦å°±æ˜¯å¯†æ–‡ï¼ˆciphertextï¼‰</p>
<p><img src="/2019/11/18/encrypt-and-decrypt/encrypt-and-decrypt_03.jpeg" alt></p>
<p>å¸¸è§çš„å¯¹ç§°å¯†ç ç®—æ³•æœ‰ï¼šDESã€3DESã€AESï¼Œè¿™ä¸‰ç§ç®—æ³•ä¹Ÿç§°å—å¯†ç ç®—æ³•ï¼Œåœ¨åŠ å¯†æˆ–è€…è§£å¯†çš„æ—¶å€™ï¼Œæ¯æ¬¡å¯¹å›ºå®šé•¿åº¦çš„æ•°æ®å—è¿›è¡Œå¤„ç†ï¼Œæ¯å®Œæˆä¸€æ¬¡åŠ å¯†è§£å¯†å¯èƒ½è¦ç»“æœå¤šæ¬¡è¿ç®—ï¼Œæœ€ç»ˆå¾—åˆ°å’Œæ˜æ–‡é•¿åº¦ä¸€æ ·çš„å¯†æ–‡ï¼Œæ•°æ®å—çš„é•¿åº¦å°±æ˜¯åˆ†ç»„çš„é•¿åº¦ï¼Œä¹Ÿå°±è¯´å¦‚æœæ˜æ–‡æˆ–è€…å¯†æ–‡çš„é•¿åº¦é™¤ä»¥åˆ†ç»„é•¿åº¦ä¸æ˜¯æ•´æ•°å€ï¼Œéœ€è¦å¯¹æ˜æ–‡è¿›è¡Œå¡«å……ï¼Œä¿è¯æ•°æ®çš„é•¿åº¦æ˜¯åˆ†ç»„é•¿åº¦çš„æ•´æ•°å—ã€‚ç”±äºæ˜æ–‡é•¿åº¦è¿œå¤§äºåˆ†ç»„çš„é•¿åº¦ï¼Œéœ€è¦å¤šæ¬¡è¿­ä»£è¿ç®—æ‰èƒ½å¾—åˆ°å¯†æ–‡æˆ–æ˜æ–‡ï¼Œäºæ˜¯å°±æœ‰äº†å¤šç§åˆ†ç»„æ¨¡å¼ï¼Œæ¯”å¦‚å¸¸è§çš„æœ‰ECBã€CBCã€CTRç­‰æ¨¡å¼ï¼Œç›®å‰ï¼ŒECBå·²è¢«è¯æ˜å­˜åœ¨å®‰å…¨é—®é¢˜ï¼Œä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨ï¼Œæœ€å¸¸ç”¨çš„æ˜¯CBCæ¨¡å¼ã€‚<a href="https://www.cnblogs.com/starwolf/p/3365834.html" target="_blank" rel="noopener">è¯¦è§</a></p>
<p>AES(Advanced Encryption Standard)ç®—æ³•ï¼šAESä¸ºåˆ†ç»„å¯†ç ï¼Œåˆ†ç»„å¯†ç ä¹Ÿå°±æ˜¯æŠŠæ˜æ–‡åˆ†æˆä¸€ç»„ä¸€ç»„çš„ï¼Œæ¯ç»„é•¿åº¦ç›¸ç­‰ï¼Œæ¯æ¬¡åŠ å¯†ä¸€ç»„æ•°æ®ï¼Œç›´åˆ°åŠ å¯†å®Œæ•´ä¸ªæ˜æ–‡ã€‚åœ¨AESæ ‡å‡†è§„èŒƒä¸­ï¼Œåˆ†ç»„é•¿åº¦åªèƒ½æ˜¯128ä½ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªåˆ†ç»„ä¸º16ä¸ªå­—èŠ‚ï¼ˆæ¯ä¸ªå­—èŠ‚8ä½ï¼‰ã€‚å¯†é’¥çš„é•¿åº¦å¯ä»¥ä½¿ç”¨128ä½ã€192ä½æˆ–256ä½ã€‚ç›®å‰AESï¼Œå·²ç»é€æ­¥å–ä»£DESã€3DESï¼Œæˆä¸ºé¦–é€‰çš„å¯¹ç§°å¯†ç ç®—æ³•æ ‡å‡†ç®—æ³•ï¼Œ</p>
<p><a href="https://blog.csdn.net/qq_28205153/article/details/55798628" target="_blank" rel="noopener">å‚è€ƒï¼šAESåŠ å¯†ç®—æ³•çš„è¯¦ç»†ä»‹ç»ä¸å®ç°</a></p>
<p>åŠ å¯†ç®—æ³•èƒ½å¤Ÿè§£å†³æœºå¯†æ€§çš„é—®é¢˜ï¼Œä½†æ˜¯å¹¶ä¸èƒ½è§£å†³æ•°æ®çš„å®Œæ•´æ€§ï¼ˆå®Œæ•´æ€§çš„æ„æ€æ˜¯åŸæ¶ˆæ¯æ²¡æœ‰è¢«ç¯¡æ”¹ï¼‰ï¼Œæ¯”å¦‚æ”»å‡»è€…è™½ç„¶èƒ½å¤Ÿæˆªè·åŠ å¯†æ•°æ®ï¼Œä½†å¦‚æœæ²¡æœ‰å¯†é’¥ï¼Œåˆ™æ— æ³•å¾—åˆ°åŸæ–‡ï¼Œä½†æ˜¯å¯ä»¥ä¿®æ”¹å¯†æ–‡çš„éƒ¨åˆ†æ•°æ®ï¼Œç„¶åå‘é€ç»™æ¥æ”¶è€…ï¼Œæ¥æ”¶è€…é€šè¿‡å¯†é’¥å‘ç°èƒ½å¤Ÿè§£å¯†ï¼Œä½†æ˜¯è§£å¯†å‡ºæ¥çš„å€¼å®é™…ä¸Šä¸æ˜¯åŸæ–‡ï¼Œæ¶ˆæ¯å·±ç»è¢«ä¿®æ”¹äº†ã€‚</p>
<h2 id="å•å‘æ•£åˆ—å‡½æ•°"><a href="#å•å‘æ•£åˆ—å‡½æ•°" class="headerlink" title="å•å‘æ•£åˆ—å‡½æ•°"></a>å•å‘æ•£åˆ—å‡½æ•°</h2><p>å•å‘æ•£åˆ—å‡½æ•°ä¹Ÿç§°ä¸ºæ¶ˆæ¯æ‘˜è¦å‡½æ•°, å“ˆå¸Œå‡½æ•°æˆ–è€…æ‚å‡‘å‡½æ•°ï¼Œå…¶è¾“å‡ºçš„æ•£åˆ—å€¼åˆç§°ä¸ºæ¶ˆæ¯æ‘˜è¦æˆ–è€…æŒ‡çº¹ï¼Œç»å…¸ç®—æ³•åŒ…æ‹¬ï¼šMD4ã€MD5ã€SHA1ã€SHA256ã€SHA512ç­‰ï¼Œç‰¹ç‚¹ï¼šåŠ å¯†åå¯†æ–‡çš„é•¿åº¦æ˜¯å®šé•¿çš„ï¼›è®¡ç®—é€Ÿåº¦å¿«ï¼Œé«˜æ•ˆï¼›æ˜æ–‡ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆæ•£åˆ—åçš„ç»“æœä¸€å®šä¸ä¸€æ ·ï¼›æ˜æ–‡ä¸€æ ·ï¼Œé‚£ä¹ˆåŠ å¯†åçš„å¯†æ–‡ä¸€å®šä¸€æ ·ï¼›åŠ å¯†ç®—æ³•æ˜¯å…¬å¼€çš„ï¼›å•å‘æ€§ï¼Œä¸å¯ä»¥é€†æ¨åç®—ã€‚å…¶ä¸­MD4ã€MD5å·²ç»è¢«ç ´è§£ï¼ŒSHA1ç›®å‰å·²ç»ä¸å®‰å…¨ã€‚</p>
<p>å…¶å®ï¼Œå¾ˆå¤šæƒ…å†µä¸‹ï¼Œä¼ é€’çš„æ¶ˆæ¯æ²¡æœ‰å¿…è¦åŠ å¯†ï¼Œåªè¦ç¡®ä¿æ¶ˆæ¯æ˜¯å®Œæ•´ä¸”æ²¡æœ‰è¢«ç¯¡æ”¹å³å¯ï¼Œå¦‚å¤©æ°”APIæ¥å£ï¼Œæ¥å£è¿”å›çš„æ•°æ®å¹¶æ²¡æœ‰åŠ å¯†ï¼Œå…¶åŸå› ï¼š1.æ¥å£çš„æ•°æ®å¹¶ä¸é‡è¦ï¼›2.åŠ å¯†å’Œè§£å¯†è¿‡ç¨‹å¾ˆæ¶ˆè€—æ€§èƒ½ã€‚å¦‚æœæˆ‘ä»¬ç›®æ ‡å°±æ˜¯é˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹ï¼Œæ¥å£æ•°æ®é€šè¿‡Hashç®—æ³•å¾—åˆ°ä¸€ä¸ªæ‘˜è¦å€¼ï¼Œæ‘˜è¦å€¼å’Œæ¥å£æ•°æ®ä¸€èµ·è¿”å›å®¢æˆ·ç«¯å°±èƒ½æ»¡è¶³è¦æ±‚ï¼Œå…¶å¤„ç†é€»è¾‘å¦‚å›¾ï¼š</p>
<p><img src="/2019/11/18/encrypt-and-decrypt/encrypt-and-decrypt_04.jpeg" alt="Hash ç®—æ³•ç¡®ä¿æ¶ˆæ¯å®Œæ•´"></p>
<p>ä¸Šé¢çš„é€»è¾‘çœ‹ä¸Šå»æ²¡æœ‰é—®é¢˜ï¼Œæ¥æ”¶æ–¹æ ¡éªŒæ‘˜è¦å€¼æ˜¯ç›¸åŒçš„ï¼Œè¯´æ˜æ¶ˆæ¯æ²¡æœ‰ç¯¡æ”¹ï¼ŒçœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿ</p>
<p>å®é™…ä¸Šè¿™ç§æ–¹æ¡ˆå­˜åœ¨ä¸­é—´äººæ”»å‡»çš„ï¼Œæ”»å‡»è¿‡ç¨‹ï¼šæ”»å‡»è€…å¯¹æ¶ˆæ¯è¿›è¡Œæ‹¦æˆªï¼ŒåŒæ—¶ä¿®æ”¹æ¥å£æ¶ˆæ¯å’Œæ¶ˆæ¯çš„æ‘˜è¦å€¼ç„¶åå‘é€ç»™æ¥æ”¶æ–¹ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°æ¶ˆæ¯åï¼Œå¯¹æ¥å£æ¶ˆæ¯è®¡ç®—æ‘˜è¦å€¼ï¼Œç„¶åä¸æ¥æ”¶åˆ°çš„æ‘˜è¦å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå‘ç°æ˜¯ç›¸åŒçš„ï¼Œæ¥æ”¶æ–¹è®¤ä¸ºæ¶ˆæ¯æ˜¯å®Œæ•´çš„ã€‚</p>
<p>å¯å®é™…å‘¢ï¼Ÿæ¶ˆæ¯è™½ç„¶æ˜¯å®Œæ•´çš„ï¼Œä½†å·²ç»è¢«ç¯¡æ”¹äº†ï¼Œå¦‚å›¾ï¼š</p>
<p><img src="/2019/11/18/encrypt-and-decrypt/encrypt-and-decrypt_05.jpeg" alt></p>
<p>é‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•ç¡®ä¿æ¶ˆæ¯æ˜¯æ­£ç¡®çš„å‘é€è€…å‘é€çš„å‘¢ï¼Ÿ</p>
<h2 id="é—®é¢˜ä¸€ï¼šå¦‚ä½•ç¡®ä¿æ¶ˆæ¯æ˜¯æ­£ç¡®çš„å‘é€è€…å‘é€çš„å‘¢ï¼Ÿ"><a href="#é—®é¢˜ä¸€ï¼šå¦‚ä½•ç¡®ä¿æ¶ˆæ¯æ˜¯æ­£ç¡®çš„å‘é€è€…å‘é€çš„å‘¢ï¼Ÿ" class="headerlink" title="é—®é¢˜ä¸€ï¼šå¦‚ä½•ç¡®ä¿æ¶ˆæ¯æ˜¯æ­£ç¡®çš„å‘é€è€…å‘é€çš„å‘¢ï¼Ÿ"></a>é—®é¢˜ä¸€ï¼šå¦‚ä½•ç¡®ä¿æ¶ˆæ¯æ˜¯æ­£ç¡®çš„å‘é€è€…å‘é€çš„å‘¢ï¼Ÿ</h2><h2 id="æ¶ˆæ¯éªŒè¯ç ç®—æ³•"><a href="#æ¶ˆæ¯éªŒè¯ç ç®—æ³•" class="headerlink" title="æ¶ˆæ¯éªŒè¯ç ç®—æ³•"></a>æ¶ˆæ¯éªŒè¯ç ç®—æ³•</h2><p>è¿™é‡Œå°±è¦æåˆ°æ¶ˆæ¯éªŒè¯ç ç®—æ³•äº†ï¼Œåœ¨é€šä¿¡åŒæ–¹å¯ä»¥ç»´æŠ¤åŒä¸€ä¸ªå¯†é’¥ï¼Œåªæœ‰æ‹¥æœ‰å¯†é’¥çš„ é€šä¿¡åŒæ–¹æ‰èƒ½ç”Ÿæˆå’ŒéªŒè¯æ¶ˆæ¯éªŒè¯ç ï¼Œæ¶ˆæ¯éªŒè¯ç ç®—æ³•éœ€è¦ä¸€ä¸ªå¯†é’¥ï¼Œè¿™å’Œå¯¹ç§°åŠ å¯†ç®—æ³•æ˜¯ä¸€æ ·çš„ï¼Œé€šä¿¡åŒæ–¹åœ¨æ¶ˆæ¯ä¼ é€’ä¹‹å‰éœ€è¦è·å¾—åŒæ ·çš„å¯†é’¥ã€‚</p>
<p>æ¶ˆæ¯éªŒè¯ç æ¨¡å‹ï¼š MAC å€¼ ï¼ macï¼ˆæ¶ˆæ¯ï¼Œå¯†é’¥ï¼‰</p>
<p>MACç®—æ³•æœ‰ä¸¤ç§å½¢å¼ï¼šCBC-MACã€HMAC</p>
<p>MACå€¼ä¸€èˆ¬å’ŒåŸå§‹æ¶ˆæ¯ä¸€èµ·ä¼ è¾“ï¼ŒåŸå§‹æ¶ˆæ¯å¯ä»¥é€‰æ‹©åŠ å¯†ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸åŠ å¯†ï¼Œé€šä¿¡åŒæ–¹ä¼šä»¥ç›¸åŒçš„æ–¹å¼ç”ŸæˆMACå€¼ï¼Œç„¶åè¿›è¡Œæ¯”è¾ƒï¼Œå·¥ä½œåŸç†å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/2019/11/18/encrypt-and-decrypt/encrypt-and-decrypt_06.jpeg" alt></p>
<p>ç›®å‰æˆ‘ä»¬ï¼Œå·²ç»è§£å†³äº†å››å¤§é—®é¢˜ä¸­çš„ä¸¤ä¸ªé—®é¢˜ï¼šæ¶ˆæ¯çš„æœºå¯†æ€§å’Œå®Œæ•´æ€§ï¼Œå³å¯¹ç§°åŠ å¯†ç®—æ³•å¯ä»¥ä¿è¯æ¶ˆæ¯çš„æœºå¯†æ€§ï¼ŒMACç®—æ³•å¯ä»¥ä¿è¯æ¶ˆæ¯çš„å®Œæ•´æ€§ï¼Œä¸¤è€…ç»“åˆä½¿ç”¨å°±å¯ä»¥ä¿è¯æ¶ˆæ¯åŒæ—¶å…·å¤‡æœºå¯†æ€§å’Œå®Œæ•´æ€§äº†ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¥½åƒé—æ¼äº†ä¸€ç‚¹ï¼Œé‚£å°±æ˜¯å¯†é’¥é…é€çš„é—®é¢˜ï¼Œè¦æƒ³ä½¿ç”¨å¯¹ç§°åŠ å¯†ï¼Œé‚£ä¹ˆåˆ†äº«ä¿¡æ¯çš„ä¸ªä½“ä¹‹é—´éƒ½éœ€è¦åˆ†äº«è¿™ä¸ªå¯†é’¥ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœ1000ä¸ªäººä¹‹é—´éƒ½ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥è¿›è¡Œå¯†æ–‡ä¼ è¾“ï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªäººå¯†é’¥è¢«ç›—çªƒäº†ï¼Œé‚£ä¹ˆæ•´ä½“åŠ å¯†çš„ä¿¡æ¯å°†éƒ½è¢«ç ´è§£äº†ï¼Œé‚£å²‚ä¸æ˜¯å¤ªå¯æ€•äº†ã€‚</p>
<h2 id="é—®é¢˜äºŒï¼šæ€æ ·é¿å…å¯¹ç§°åŠ å¯†ç®—æ³•çš„ç¼ºé™·å‘¢ï¼Ÿ"><a href="#é—®é¢˜äºŒï¼šæ€æ ·é¿å…å¯¹ç§°åŠ å¯†ç®—æ³•çš„ç¼ºé™·å‘¢ï¼Ÿ" class="headerlink" title="é—®é¢˜äºŒï¼šæ€æ ·é¿å…å¯¹ç§°åŠ å¯†ç®—æ³•çš„ç¼ºé™·å‘¢ï¼Ÿ"></a>é—®é¢˜äºŒï¼šæ€æ ·é¿å…å¯¹ç§°åŠ å¯†ç®—æ³•çš„ç¼ºé™·å‘¢ï¼Ÿ</h2><h2 id="éå¯¹ç§°åŠ å¯†ç®—æ³•"><a href="#éå¯¹ç§°åŠ å¯†ç®—æ³•" class="headerlink" title="éå¯¹ç§°åŠ å¯†ç®—æ³•"></a>éå¯¹ç§°åŠ å¯†ç®—æ³•</h2><p>éå¯¹ç§°åŠ å¯†ç®—æ³•éœ€è¦ä¸¤ä¸ªå¯†é’¥ï¼šå…¬å¼€å¯†é’¥ï¼ˆpublickey:ç®€ç§°å…¬é’¥ï¼‰å’Œç§æœ‰å¯†é’¥ï¼ˆprivatekey:ç®€ç§°ç§é’¥ï¼‰ã€‚å…¬é’¥ä¸ç§é’¥æ˜¯ä¸€å¯¹ï¼Œå¦‚æœç”¨å…¬é’¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œåªæœ‰ç”¨å¯¹åº”çš„ç§é’¥æ‰èƒ½è§£å¯†ã€‚å› ä¸ºåŠ å¯†å’Œè§£å¯†ä½¿ç”¨çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯†é’¥ï¼ˆåŠ å¯†æ˜¯å•å‘çš„ï¼‰ï¼Œä¸æ˜¯ä¸€ä¸ªç®—æ³•è€Œæ˜¯ä¸€ç»„ç®—æ³•ï¼Œå¦‚æœå…¬å¼€å¯†é’¥ç®—æ³•ç”¨äºåŠ å¯†è§£å¯†è¿ç®—ï¼Œä¹ æƒ¯ä¸Šç§°ä¸ºéå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å¯¹ç§°åŠ å¯†ç®—æ³•å’Œéå¯¹ç§°åŠ å¯†ç®—æ³•çš„æ¯”è¾ƒï¼š</p>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>åŠŸèƒ½</th>
<th>å¯†é’¥</th>
<th>è¿ç®—é€Ÿåº¦</th>
</tr>
</thead>
<tbody><tr>
<td>å¯¹ç§°åŠ å¯†ç®—æ³•</td>
<td>ä¸»è¦ç”¨äºåŠ å¯†å’Œè§£å¯†</td>
<td>å¯†é’¥æ˜¯ä¸€ ä¸²æ•°å­—ï¼ŒåŠ å¯†è€…å’Œè§£å¯†è€…ä½¿ç”¨åŒæ ·çš„ ä¸€ä¸ªå¯†é’¥</td>
<td>æ¯”è¾ƒå¿«</td>
</tr>
<tr>
<td>éå¯¹ç§°åŠ å¯†ç®—æ³•</td>
<td>åŠ å¯†è§£å¯†ã€å¯†é’¥åå•†ã€æ•°å­—ç­¾å</td>
<td>å…¬å¼€å¯†é’¥ç®—æ³•çš„å¯†é’¥æ˜¯ä¸€å¯¹ï¼Œåˆ†åˆ«æ˜¯å…¬é’¥ï¼ˆpublic keyï¼‰å’Œç§é’¥ï¼ˆ private keyï¼‰ï¼Œä¸€èˆ¬ç§é’¥ç”±å¯†é’¥å¯¹çš„ç”Ÿæˆæ–¹æŒæœ‰ï¼Œé¿å…æ³„éœ²ï¼Œè€Œå…¬é’¥ä»»ä½•äººéƒ½å¯ä»¥æŒæœ‰ï¼Œä¹Ÿä¸æ€•æ³„éœ²ã€‚</td>
<td>è¿ç®—éå¸¸ç¼“æ…¢</td>
</tr>
</tbody></table>
<p>åŠ å¯†è§£å¯†è¿‡ç¨‹å¦‚å›¾ï¼š</p>
<p><img src="/2019/11/18/encrypt-and-decrypt/encrypt-and-decrypt_07.jpeg" alt></p>
<h3 id="RSA-ç®—æ³•"><a href="#RSA-ç®—æ³•" class="headerlink" title="RSA ç®—æ³•"></a>RSA ç®—æ³•</h3><p>å…¬å¼€å¯†é’¥ç®—æ³•æœ€é‡è¦å’Œæœ€å¹¿æ³›ä½¿ç”¨çš„ç®—æ³•å°±æ˜¯RSAç®—æ³•ï¼Œè¯¥ç®—æ³•æ˜¯Ron Rivest ã€ AdiShamirã€Leonard Adlemanä¸‰ä¸ªäººåˆ›å»ºçš„ï¼Œä»¥ä¸‰ä¸ªäººåå­—çš„é¦–å­—æ¯å‘½åã€‚RSA ç®—æ³•æ˜¯ä¸€ä¸ªå¤šç”¨é€”çš„ç®—æ³• ï¼Œå¯ä»¥è¿›è¡ŒåŠ å¯†è§£å¯†ã€å¯†é’¥åå•†ã€æ•°å­—ç­¾åã€‚</p>
<p>å…¬é’¥å’Œç§é’¥ç”±å¾ˆå¤šå‚æ•°ç»„æˆï¼Œä¸€èˆ¬ä»¥æ–‡ä»¶çš„å½¢å¼æä¾›ã€‚</p>
<h4 id="å¯†é’¥æ–‡ä»¶ç”Ÿæˆè¿‡ç¨‹"><a href="#å¯†é’¥æ–‡ä»¶ç”Ÿæˆè¿‡ç¨‹" class="headerlink" title="å¯†é’¥æ–‡ä»¶ç”Ÿæˆè¿‡ç¨‹"></a>å¯†é’¥æ–‡ä»¶ç”Ÿæˆè¿‡ç¨‹</h4><p>å†…éƒ¨ç»“æ„å¤§æ¦‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">rsa_st</span>&#123;</span></span><br><span class="line">    BIGNUM *p; </span><br><span class="line">    BIGNUM *q; </span><br><span class="line">    BIGNUM *n; </span><br><span class="line">    BIGNUM *e; </span><br><span class="line">    BIGNUM *d; </span><br><span class="line">&#125; RSA;</span><br></pre></td></tr></table></figure>

<p>å¯†é’¥å¯¹ç”Ÿæˆè¿‡ç¨‹ï¼š</p>
<ul>
<li>é€‰å–ä¸¤ä¸ªå¾ˆå¤§çš„è´¨æ•° p å’Œ q</li>
<li>æ±‚è¿™ä¸¤ä¸ªæ•°çš„ä¹˜ç§¯ nã€‚</li>
<li>å–ä¸€ ä¸ªå…¬å¼€æŒ‡æ•° e ï¼Œè¿™ä¸ªæ•°çš„å€¼å°äº(p - 1)(q - 1), eå¯¹åº”çš„å€¼å’Œ(p - 1)(q - 1)çš„å€¼äº’è´¨ã€‚</li>
<li>e å’Œ n ç»„åˆèµ·æ¥å°±ç›¸å½“äºå…¬é’¥ã€‚ n å€¼çš„é•¿åº¦å°±ç›¸å½“äºå¯†é’¥å¯¹çš„é•¿åº¦ã€‚</li>
<li>eã€ pã€ q èƒ½å¤Ÿè®¡ç®—å‡ºç§é’¥ dï¼Œd å’Œ n ç»„åˆèµ·æ¥å°±æ˜¯ç§é’¥ã€‚</li>
</ul>
<h4 id="åŠ å¯†è¿‡ç¨‹"><a href="#åŠ å¯†è¿‡ç¨‹" class="headerlink" title="åŠ å¯†è¿‡ç¨‹"></a>åŠ å¯†è¿‡ç¨‹</h4><p>æ˜æ–‡Mè¿›è¡Œå¤šæ¬¡å¹‚è¿ç®—ï¼Œè¿ç®—çš„æ¬¡æ•°å°±æ˜¯å…¬é’¥ï¼Œè®¡ç®—å‡ºå€¼åå†è¿›è¡Œæ¨¡è¿ç®— (mod n)ï¼Œæœ€ç»ˆå¾—åˆ°çš„ C å°±æ˜¯å¯†æ–‡ã€‚</p>
<pre><code>C = M ^ e (mod n)</code></pre><h4 id="è§£å¯†è¿‡ç¨‹"><a href="#è§£å¯†è¿‡ç¨‹" class="headerlink" title="è§£å¯†è¿‡ç¨‹"></a>è§£å¯†è¿‡ç¨‹</h4><p>å¯¹å¯†æ–‡è¿›è¡Œ d æ¬¡çš„å¹‚è¿ç®—ï¼Œç„¶åè¿›è¡Œæ¨¡è¿ç®—ï¼Œæœ€ç»ˆå¾—åˆ°æ˜æ–‡ Mã€‚</p>
<pre><code>M = C ^ d (mod n)</code></pre><h4 id="åŠ å¯†å’Œè§£å¯†äº’é€†è¿‡ç¨‹"><a href="#åŠ å¯†å’Œè§£å¯†äº’é€†è¿‡ç¨‹" class="headerlink" title="åŠ å¯†å’Œè§£å¯†äº’é€†è¿‡ç¨‹"></a>åŠ å¯†å’Œè§£å¯†äº’é€†è¿‡ç¨‹</h4><ul>
<li>C^d çš„è¿‡ç¨‹ç›¸ å½“äº (M^e)^dã€‚</li>
<li>(M^e)^d ç›¸å½“äº M^(e*d)ã€‚</li>
<li>(e*d) mod n ç­‰äº 1ã€‚</li>
<li>C^d (mod nï¼‰æœ€ç»ˆå°±èƒ½åè§£å‡º Mã€‚</li>
</ul>
<h4 id="RSAç®—æ³•-ä¸ºä»€ä¹ˆæ¯”è¾ƒå®‰å…¨ï¼Ÿ"><a href="#RSAç®—æ³•-ä¸ºä»€ä¹ˆæ¯”è¾ƒå®‰å…¨ï¼Ÿ" class="headerlink" title="RSAç®—æ³• ä¸ºä»€ä¹ˆæ¯”è¾ƒå®‰å…¨ï¼Ÿ"></a>RSAç®—æ³• ä¸ºä»€ä¹ˆæ¯”è¾ƒå®‰å…¨ï¼Ÿ</h4><p>å¹•è¿ç®—çš„é€†è¿‡ç¨‹å°±æ˜¯æ±‚å¯¹æ•°é—®é¢˜ï¼Œè€Œæ¨¡è¿ç®—å¯ä»¥è®¤ä¸ºæ˜¯ç¦»æ•£é—®é¢˜ï¼ŒRSAç®—æ³•å°±æ˜¯ç¦»æ•£å¯¹æ•°æ¨¡å‹ï¼Œåªè¦å¯†é’¥é•¿åº¦è¶³å¤Ÿé•¿ï¼Œç¦»æ•£å¯¹æ•°å¾ˆéš¾ç ´è§£ã€‚å®‰å…¨æ€§å’Œå¯†é’¥å¯¹çš„é•¿åº¦æœ‰å…³ï¼Œä¹Ÿå°±æ˜¯å’Œ n è¿™ä¸ªå€¼æœ‰å…³ï¼Œå®ƒå¯ä»¥ç§°ä¸ºå¯†é’¥é•¿åº¦ï¼Œç ´è§£ç§é’¥æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>å…¬é’¥æŒæœ‰äººæœ‰ e å’Œ nï¼Œè€Œè¦è®¡ç®—å‡ºç§é’¥dï¼Œéœ€è¦çŸ¥é“ p å’Œ qï¼Œæƒ³é€šè¿‡ä¸€ä¸ªå·¨å¤§çš„æ•°å­— n è·å– p å’Œ q æ˜¯ä¸€ä¸ªå› å¼åˆ†è§£é—®é¢˜ï¼Œæš´åŠ›ç ´è§£å¾ˆéš¾ã€‚</li>
<li>æ”»å‡»è€…å‡å¦‚æƒ³é€šè¿‡å¯†æ–‡å’Œå…¬é’¥ç ´è§£ç§é’¥ï¼Œå°±è¦æ±‚è§£å†³ç¦»æ•£å¯¹æ•°é—®é¢˜ï¼Œæ›´æ˜¯éš¾ä¸ŠåŠ éš¾ã€‚</li>
</ul>
<h3 id="å¯†é’¥åå•†ç®—æ³•"><a href="#å¯†é’¥åå•†ç®—æ³•" class="headerlink" title="å¯†é’¥åå•†ç®—æ³•"></a>å¯†é’¥åå•†ç®—æ³•</h3><p>å¯†é’¥åå•†ç®—æ³•æ˜¯ç”¨æ¥è§£å†³å¯†é’¥åˆ†é…ã€å­˜å‚¨ã€ä¼ è¾“ç­‰é—®é¢˜ï¼Œåœ¨ç½‘ç»œé€šä¿¡ä¸­ï¼Œä¸ºäº†åŠ å¯†è§£å¯†æ•°æ®ï¼Œå¯ä»¥é‡‡ç”¨åŠ¨æ€å¯†é’¥ï¼Œä¹Ÿå«ä½œä¼šè¯å¯†é’¥ï¼Œå…¶ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ä¼šè¯å¯†é’¥çš„ä½œç”¨å°±æ˜¯ä¸ºäº†åŠ å¯†è§£å¯†é€šä¿¡æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å¯¹ç§°åŠ å¯†ç®—æ³•å¯ä»¥ä½¿ç”¨ä¼šè¯å¯†é’¥è¿›è¡ŒåŠ å¯†è§£å¯†ã€‚</li>
<li>åœ¨åŠ å¯†è§£å¯†é€šä¿¡æ•°æ®ä¹‹å‰ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éœ€è¦åå•†å‡ºä¼šè¯å¯†é’¥ï¼Œè€Œä¼šè¯å¯†é’¥åªæœ‰æœåŠ¡å™¨ç«¯å’Œç‰¹å®šçš„å®¢æˆ·ç«¯æ‰èƒ½çŸ¥æ™“ï¼Œä¸èƒ½æ³„éœ²ï¼Œè¿™å¯ä»¥é‡‡ç”¨å¯†é’¥åå•†ç®—æ³•è§£å†³ã€‚</li>
<li>ä¼šè¯å¯†é’¥å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„å†…å­˜ä¸­ï¼Œä¸ç”¨å­˜å‚¨ï¼Œä¸€æ—¦å®¢æˆ·ç«¯å’Œæœ åŠ¡å™¨ç«¯çš„è¿æ¥å…³é—­ï¼Œè¯¥å¯†é’¥å°±ä¼šæ¶ˆå¤±ï¼Œå®‰å…¨æ€§å°±å¾—åˆ°äº†å¾ˆå¤§çš„ä¿éšœã€‚</li>
</ul>
<h4 id="RSA-å¯†é’¥åå•†ç®—æ³•å·¥ä½œåŸç†"><a href="#RSA-å¯†é’¥åå•†ç®—æ³•å·¥ä½œåŸç†" class="headerlink" title="RSA å¯†é’¥åå•†ç®—æ³•å·¥ä½œåŸç†"></a>RSA å¯†é’¥åå•†ç®—æ³•å·¥ä½œåŸç†</h4><ul>
<li>å®¢æˆ·ç«¯åˆå§‹åŒ–è¿æ¥æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨å‘é€ RSA å¯†é’¥å¯¹çš„å…¬é’¥ç»™å®¢æˆ·ç«¯ã€‚ </li>
<li>å®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªéšæœºå€¼ï¼Œè¿™ä¸ªå€¼å¿…é¡»æ˜¯éšæœºçš„ï¼Œä¸èƒ½è¢«æ”»å‡»è€…çŒœå‡ºï¼Œè¿™ä¸ªå€¼å°±æ˜¯ä¼šè¯å¯†é’¥ã€‚ </li>
<li>å®¢æˆ·ç«¯ä½¿ç”¨æœåŠ¡å™¨ RSA å¯†é’¥å¯¹çš„å…¬é’¥åŠ å¯†ä¼šè¯å¯†é’¥ï¼Œå¹¶å‘é€ç»™æœåŠ¡å™¨ç«¯ï¼Œç”±äºæ”»å‡»è€…æ²¡æœ‰æœåŠ¡å™¨çš„ç§é’¥ï¼Œæ‰€ä»¥æ— æ³•è§£å¯†ä¼šè¯å¯†é’¥ã€‚ </li>
<li>æœåŠ¡å™¨ç«¯ç”¨å®ƒçš„ç§é’¥è§£å¯†å‡ºä¼šè¯å¯†é’¥ã€‚</li>
<li>è‡³æ­¤åŒæ–¹å®Œæˆè¿æ¥ï¼Œæ¥ä¸‹æ¥æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨å¯¹ç§°åŠ å¯†ç®—æ³•å’Œä¼šè¯å¯†é’¥åŠ å¯†è§£å¯†æ•°æ®ã€‚</li>
</ul>
<p>ç”±äºä¼šè¯å¯†é’¥é•¿åº¦ç›¸å¯¹å¾ˆå°ï¼Œæ•°æ®é‡ä¸å¤§ï¼Œæ¯”RSAåŠ å¯†ä¹Ÿå°±å¿«å¤šäº†</p>
<h2 id="æ··åˆåŠ å¯†ç³»ç»Ÿ"><a href="#æ··åˆåŠ å¯†ç³»ç»Ÿ" class="headerlink" title="æ··åˆåŠ å¯†ç³»ç»Ÿ"></a>æ··åˆåŠ å¯†ç³»ç»Ÿ</h2><p>å¥½äº†ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ RSA ç®—æ³•çš„åŸºæœ¬çŸ¥è¯†å’Œ RSA å¯†é’¥åå•†ç®—æ³•ï¼Œç°åœ¨æ¥å›ç­”ä¸Šé¢æå‡ºçš„é—®é¢˜ä¸‰ï¼Œæ€æ ·è§£å†³å¯†é’¥é…é€é—®é¢˜å‘¢ï¼Ÿ</p>
<p><img src="/2019/11/18/encrypt-and-decrypt/encrypt-and-decrypt_08.jpeg" alt></p>
<p>ä¸Šå›¾æ‰€ç¤ºï¼Œæ˜¯å°†å¯¹ç§°å¯†ç å’Œå…¬é’¥å¯†ç çš„ä¼˜åŠ¿ç›¸ç»“åˆï¼Œè§£å†³äº†å…¬é’¥å¯†ç é€Ÿåº¦æ…¢ï¼Œé€šè¿‡å…¬é’¥å¯†ç è§£å†³äº†å¯¹ç§°å¯†ç çš„å¯†é’¥é…é€é—®é¢˜ï¼Œä¹Ÿç§°æ··åˆåŠ å¯†ç³»ç»Ÿã€‚ä¼šè¯å¯†é’¥ä¸ºæœ¬æ¬¡é€šä¿¡éšæœºç”Ÿæˆçš„ä¸´æ—¶å¯†é’¥ï¼Œä½œä¸ºå¯¹ç§°å¯†ç çš„å¯†é’¥ï¼Œç”¨äºåŠ å¯†æ¶ˆæ¯ï¼Œæé«˜é€Ÿåº¦ã€‚</p>
<p>åŠ å¯†æ­¥éª¤ï¼ˆå‘é€æ¶ˆæ¯ï¼‰ï¼š</p>
<ol>
<li>é¦–å…ˆï¼Œæ¶ˆæ¯å‘é€è€…è¦æ‹¥æœ‰æ¶ˆæ¯æ¥æ”¶è€…çš„å…¬é’¥</li>
<li>ç”Ÿæˆä¼šè¯å¯†é’¥ï¼Œä½œä¸ºå¯¹ç§°å¯†ç çš„å¯†é’¥ï¼ŒåŠ å¯†æ¶ˆæ¯</li>
<li>ç”¨æ¶ˆæ¯æ¥æ”¶è€…çš„å…¬é’¥ï¼ŒåŠ å¯†ä¼šè¯å¯†é’¥</li>
<li>å°†å‰2æ­¥ç”Ÿæˆçš„åŠ å¯†ç»“æœï¼Œä¸€å¹¶å‘ç»™æ¶ˆæ¯æ¥æ”¶è€…</li>
</ol>
<p>è§£å¯†æ­¥éª¤ï¼ˆæ¥æ”¶æ¶ˆæ¯ï¼‰ï¼š</p>
<ol>
<li>æ¶ˆæ¯æ¥æ”¶è€…ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†å‡ºä¼šè¯å¯†é’¥</li>
<li>å†ç”¨ç¬¬1æ­¥è§£å¯†å‡ºæ¥çš„ä¼šè¯å¯†é’¥ï¼Œè§£å¯†æ¶ˆæ¯</li>
</ol>
<p>åˆ°è¿™é‡Œï¼Œæ··åˆåŠ å¯†ç³»ç»Ÿæ˜¯å¦å®Œç¾æ— ç¼ºäº†å‘¢ï¼Ÿè¿˜æ˜¯å›åˆ°æ–‡ç« å¼€å¤´ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸¤ä¸ªé—®é¢˜æ²¡æœ‰è§£å†³ï¼šèº«ä»½éªŒè¯ã€ä¸å¯æŠµèµ–æ€§ã€‚</p>
<p>A ã€ B ã€ C ä¸‰ä¸ªäººå…±äº«ä¸€ä¸ªå¯¹ç§°åŠ å¯†ç®—æ³•å¯†é’¥ï¼Œ A å‘ B å‘é€äº†ä¸€æ¡æ¶ˆæ¯ï¼Œä½†æ˜¯ A å¯ä»¥æŠµèµ–è¯´è¿™æ¡æ¶ˆæ¯å¹¶ä¸æ˜¯ä»–å‘é€çš„ï¼Œç†ç”±å°±æ˜¯ C ä¹Ÿ æœ‰åŒæ ·çš„å¯†é’¥ï¼Œè¿™æ¡åŠ›å£å¯†æ¶ˆæ¯å¯èƒ½æ˜¯ C å‘é€ç»™ B çš„ï¼ŒB æ— æ³•å‘ç¬¬ä¸‰æ–¹è¯æ˜æ˜¯ A ç»™ä»–å‘é€äº†æ¶ˆæ¯ã€‚</p>
<p>å…¬å¼€å¯†é’¥ç®—æ³•ä¸­ï¼Œå¦‚æœç®—æ³•ç”¨äºåŠ å¯†è§£å¯†ï¼Œä¹ŸåŒæ ·ä¸èƒ½é˜²æ­¢æŠµèµ–ï¼ŒRSA çš„å…¬é’¥æ˜¯å®Œå…¨å…¬å¼€çš„ï¼ŒRSAç§é’¥æ‹¥æœ‰è€…è™½ç„¶èƒ½å¤Ÿè§£å¯†ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ç¡®è®¤æ˜¯å“ªä¸ªå®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯ï¼Œä»»ä½•äººéƒ½å¯ä»¥æŠµèµ–ã€‚</p>
<h2 id="é—®é¢˜ä¸‰ï¼šå¦‚ä½•ç¡®è®¤å¯¹æ–¹çš„èº«ä»½ï¼Œé˜²æ­¢æŠµèµ–å‘¢ï¼Ÿ"><a href="#é—®é¢˜ä¸‰ï¼šå¦‚ä½•ç¡®è®¤å¯¹æ–¹çš„èº«ä»½ï¼Œé˜²æ­¢æŠµèµ–å‘¢ï¼Ÿ" class="headerlink" title="é—®é¢˜ä¸‰ï¼šå¦‚ä½•ç¡®è®¤å¯¹æ–¹çš„èº«ä»½ï¼Œé˜²æ­¢æŠµèµ–å‘¢ï¼Ÿ"></a>é—®é¢˜ä¸‰ï¼šå¦‚ä½•ç¡®è®¤å¯¹æ–¹çš„èº«ä»½ï¼Œé˜²æ­¢æŠµèµ–å‘¢ï¼Ÿ</h2><h2 id="æ•°å­—ç­¾å"><a href="#æ•°å­—ç­¾å" class="headerlink" title="æ•°å­—ç­¾å"></a>æ•°å­—ç­¾å</h2><p>åœ¨RSAç®—æ³•ä¸­ï¼Œç§é’¥åªæœ‰å¯†é’¥å¯¹çš„ç”Ÿæˆè€…æŒæœ‰ï¼Œå¦‚æœä¸è€ƒè™‘å¯†é’¥æ³„éœ²çš„é—®é¢˜ï¼Œç§é’¥æ‹¥æœ‰è€…ä½¿ç”¨å¯†é’¥ï¼ˆæ³¨æ„ä¸æ˜¯åŠ å¯†æ“ä½œï¼‰ç­¾ç½²ä¸€æ¡æ¶ˆæ¯ï¼Œç„¶åå‘é€ç»™ä»»æ„çš„æ¥æ”¶æ–¹ï¼Œæ¥æ”¶æ–¹åªè¦ æ‹¥æœ‰ç§é’¥å¯¹åº”çš„å…¬é’¥ï¼Œå°±èƒ½æˆåŠŸåè§£ç­¾ç½²æ¶ˆæ¯ï¼Œç”±äºåªæœ‰ç§é’¥æŒæœ‰è€…æ‰èƒ½â€ç­¾ç½²â€æ¶ˆæ¯ï¼Œä¸èƒ½æŠµèµ–è¯´è¿™æ¡ç­¾ç½²æ¶ˆæ¯ä¸æ˜¯ä»–å‘é€çš„ï¼Œè¿™å°±æ˜¯æ•°å­—ç­¾åæŠ€æœ¯ã€‚</p>
<p>ç‰¹ç‚¹ï¼š</p>
<ol>
<li>é˜²ç¯¡æ”¹ï¼šæ•°æ®ä¸ä¼šè¢«ä¿®æ”¹ã€‚</li>
<li>é˜²ä¼ªé€ ï¼šå‘é€çš„æ¶ˆæ¯ä¸èƒ½å¤Ÿä¼ªé€ ã€‚</li>
<li>é˜²æŠµèµ–ï¼šæ¶ˆæ¯ç­¾ç½²è€…ä¸èƒ½æŠµèµ–ã€‚</li>
</ol>
<p>å‰é¢ä¸¤ç‚¹ï¼ŒMAC ç®—æ³•ä¹Ÿå…·æœ‰ï¼ŒMAC ç®—æ³•èƒ½ä¿è¯ä¼ é€’çš„æ¶ˆæ¯æ˜¯ç»è¿‡éªŒè¯çš„ï¼Œä½†ä¸èƒ½å¯¹æ¶ˆæ¯å‘é€è€…çš„èº«ä»½è¿›è¡ŒéªŒè¯ï¼ŒåŸå› å°±åœ¨äºæ¶ˆæ¯å‘é€æ–¹å’Œæ¥æ”¶æ–¹ æ‹¥æœ‰åŒæ ·çš„å¯†é’¥ï¼Œæ‰€ä»¥åŒæ–¹å¯ä»¥æŠµèµ–ã€‚</p>
<p>å‰é¢è®²åˆ°çš„RSAåŠ å¯†ï¼Œé‚£ä¹ˆRSAåŠ å¯†å’Œæ•°å­—ç­¾åæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿæ•°å­—ç­¾åï¼Œå…¶å®å°±æ˜¯å°†å…¬é’¥å¯†ç åè¿‡æ¥ä½¿ç”¨</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">ç§é’¥</th>
<th align="center">å…¬é’¥</th>
</tr>
</thead>
<tbody><tr>
<td align="center">å…¬é’¥å¯†ç </td>
<td align="center">æ¥å—è€…è§£å¯†æ˜¯ä½¿ç”¨</td>
<td align="center">å‘é€è€…åŠ å¯†æ—¶ä½¿ç”¨</td>
</tr>
<tr>
<td align="center">æ•°å­—ç­¾å</td>
<td align="center">ç­¾åè€…ç”Ÿæˆç­¾åæ—¶ä½¿ç”¨</td>
<td align="center">éªŒè¯è€…éªŒè¯ç­¾åæ—¶ä½¿ç”¨</td>
</tr>
<tr>
<td align="center">è°æŒæœ‰å¯†é’¥</td>
<td align="center">ä¸ªäººæŒæœ‰</td>
<td align="center">ä»»ä½•äººéƒ½å¯ä»¥æŒæœ‰</td>
</tr>
</tbody></table>
<p>å®ç°è¿‡ç¨‹ï¼š</p>
<p><img src="/2019/11/18/encrypt-and-decrypt/encrypt-and-decrypt_09.jpeg" alt></p>
<p>ç­¾åç”Ÿæˆ:</p>
<p>å‘é€è€…Aliceå¯¹æ¶ˆæ¯è®¡ç®—æ‘˜è¦å€¼ã€‚<br>å‘é€è€…Aliceç”¨å•å‘æ•£åˆ—å‡½æ•°ç”Ÿæˆæ•£åˆ—å€¼ï¼Œç”¨è‡ªå·±çš„ç§é’¥å¯¹æ•£åˆ—å€¼ï¼ˆæ‘˜è¦å€¼ï¼‰è¿›è¡Œç­¾åå¾—åˆ°ç­¾åå€¼ã€‚<br>å‘é€è€…Aliceå°†åŸå§‹æ¶ˆæ¯å’Œç­¾åå€¼ä¸€åŒå‘ç»™æ¥æ”¶è€…ã€‚</p>
<p>ç­¾åéªŒè¯:</p>
<p>æ¥æ”¶è€…Bobæ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œæ‹†åˆ†å‡ºæ¶ˆæ¯å’Œæ¶ˆæ¯ç­¾åå€¼ Aã€‚<br>æ¥æ”¶è€…Bobä½¿ç”¨å•å‘æ•£åˆ—å‡½æ•°å¯¹æ¶ˆæ¯ç”Ÿæˆæ•£åˆ—å€¼ Bã€‚<br>æ¥æ”¶è€…Bobå¯¹æ‘˜è¦å€¼ B å’Œç­¾åå€¼ A è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒè¡¨ç¤ºç­¾åéªŒè¯æˆåŠŸï¼Œå¦åˆ™å°±æ˜¯éªŒè¯å¤±è´¥ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæ•°å­—ç­¾åæŠ€æœ¯çš„æœ¬è´¨ä¸æ˜¯ä¸ºäº†åŠ å¯†ï¼Œæ‰€ä»¥å’Œç­¾åå€¼ä¸€åŒä¼ é€’çš„æ¶ˆæ¯æ˜¯ä¸ç”¨åŠ å¯†çš„ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¯¹æ¶ˆæ¯åŠ å¯†å å†è®¡ç®—ç­¾åå€¼ã€‚<br>å…¬å¼€å¯†é’¥ç®—æ³•è¿è¡Œæ¯”è¾ƒç¼“æ…¢ï¼Œæ•°å­—ç­¾åç®—æ³•å»ºè®®å¯¹æ¶ˆæ¯æ‘˜è¦å€¼è¿›è¡Œç­¾åï¼Œå› ä¸ºæ‘˜è¦å€¼çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œè¿ç®—çš„æ—¶å€™é€Ÿåº¦ä¼šæ¯”è¾ƒå¿«ã€‚</p>
</blockquote>
<p>ç›®å‰æ¥è®²ï¼Œæˆ‘ä»¬å››ä¸ªå¤§é—®é¢˜éƒ½å·²ç»è§£å†³äº†ï¼ŒåŠ å¯†è§£å¯†æŠ€æœ¯ä¹Ÿä¸€æ­¥ä¸€æ­¥èµ°å‘æˆç†Ÿï¼Œæ··åˆåŠ å¯†ç³»ç»Ÿè§£å†³äº†å…¬é’¥å¯†ç åŠ å¯†é€Ÿåº¦æ…¢ã€å¯¹ç§°å¯†ç çš„å¯†é’¥é…é€é—®é¢˜ï¼Œæ•°å­—ç­¾åå¯ä»¥åšåˆ°é˜²ç¯¡æ”¹ã€é˜²ä¼ªé€ å’Œé˜²æŠµèµ–ï¼Œå¥½åƒä¸€åˆ‡éƒ½OKäº†ã€‚ä½†æ˜¯æˆ‘ä»¬å¥½åƒå¿½ç•¥ä¸€ä¸ªåœ°æ–¹ï¼Œé‚£å°±æ˜¯ä¸ç®¡æ˜¯æ··åˆåŠ å¯†è§£å¯†æŠ€æœ¯ã€RSAåŠ å¯†ç®—æ³•ï¼Œè¿˜æ˜¯æ•°å­—ç­¾åæŠ€æœ¯ï¼Œéƒ½éœ€è¦ä¼ é€’ä¸€ä¸ªå…¬é’¥ç»™å¯¹æ–¹ï¼Œå¦‚æœåœ¨ä¼ é€’å…¬é’¥è¿‡ç¨‹ä¸­è¢«äººåšæ‰‹è„šäº†å‘¢ï¼Œæ¢å¥è¯è¯´ï¼ŒæœåŠ¡å™¨ä¼ é€’ç»™å®¢æˆ·ç«¯çš„å…¬é’¥å¯èƒ½è¢«æ”»å‡»è€…æ›¿æ¢ï¼Œå®‰å…¨æ€§ä¹Ÿå°±è¡ç„¶æ— å­˜äº†ï¼Œè¿™å°±æ˜¯ä¸­é—´äººæ”»å‡»ï¼Œæ”»å‡»è¿‡ç¨‹å¦‚å›¾ï¼š</p>
<p><img src="/2019/11/18/encrypt-and-decrypt/encrypt-and-decrypt_10.jpg" alt></p>
<ul>
<li>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘èµ·è¿æ¥è¯·æ±‚ï¼ŒæœŸæœ›è·å–æœåŠ¡å™¨çš„RSAå…¬é’¥ï¼Œæ”»å‡»è€…åŠ«æŒäº†è¿™ä¸ªè¯·æ±‚ã€‚</li>
<li>æ”»å‡»è€…è‡ªå·±ç”Ÿæˆä¸€å¯¹ RSA å¯†é’¥å¯¹ï¼Œç„¶åå°†æ”»å‡»è€…çš„ RSA å…¬é’¥å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>
<li>æ”»å‡»è€…ç„¶åå†å‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç”Ÿæˆ RSA å¯†é’¥å¯¹ï¼Œå°† RSA å…¬é’¥å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®é™…ä¸Šæ˜¯å‘é€ç»™æ”»å‡»è€…ã€‚</li>
<li>å®¢æˆ·ç«¯é€šè¿‡æ”»å‡»è€…çš„å…¬é’¥åŠ å¯†å¯†é’¥å¹¶å‘é€ç»™æœåŠ¡å™¨ï¼Œå®é™…ä¸Šæ˜¯å‘é€ç»™æ”»å‡»è€…ã€‚</li>
<li>æ”»å‡»è€…ç”¨è‡ªå·±çš„ RSA ç§é’¥è§£å¯†äº†å¯†é’¥ Aï¼Œç„¶åè‡ªå·±ç”Ÿæˆä¸€ä¸ªå¯†é’¥ B ï¼Œç”¨æœåŠ¡å™¨çš„ RSA å…¬é’¥åŠ å¯†åå‘é€ç»™æœåŠ¡å™¨ç«¯ã€‚</li>
<li>æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°è¯·æ±‚åï¼Œç”¨è‡ªå·±çš„ RSA ç§é’¥è§£å¯†å‡ºæ”»å‡»è€…çš„å¯†é’¥ B ã€‚</li>
<li>å®¢æˆ·ç«¯ä½¿ç”¨æ”»å‡»è€…çš„å¯†é’¥å— Aï¼Œé‡‡ç”¨å¯¹ç§°åŠ å¯†ç®—æ³•ï¼ˆAESï¼‰åŠ å¯†æ•°æ®å¹¶å‘é€ç»™æœåŠ¡å™¨ç«¯ï¼Œå®é™…ä¸Šæ˜¯å‘é€ç»™æ”»å‡»è€…ã€‚</li>
<li>æ”»å‡»è€…ä½¿ç”¨è‡ªå·±çš„å¯†é’¥å—Aã€é‡‡ç”¨ AES ç®—æ³•è§£å¯†å‡ºæ˜æ–‡ï¼Œå®¢æˆ·ç«¯ç›¸å½“äºæ³„éœ²äº†éšç§ï¼Œæ”»å‡»è€…ä½¿ç”¨å¯†é’¥B ï¼Œé‡‡ç”¨ AES ç®—æ³•åŠ å¯†æ˜æ–‡åå‘é€ç»™æœåŠ¡å™¨ã€‚</li>
<li>æœåŠ¡å™¨ä½¿ç”¨å¯†é’¥å— Bï¼Œé‡‡ç”¨ AES ç®—æ³•åŠ å¯†æ•°æ®å¹¶å‘é€ç»™æ”»å‡»è€…ã€‚</li>
<li>æ”»å‡»è€…ä½¿ç”¨å¯†é’¥å— Bï¼Œé‡‡ç”¨ AES ç®—æ³•è§£å¯†å‡ºæ˜æ–‡æ•°æ®ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„åŠ å¯†æ•°æ®è¢«æˆåŠŸç ´è§£ã€‚</li>
</ul>
<p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœé­é‡äº†ä¸­é—´äººæ”»å‡»ï¼Œé‚£ä¹ˆå…¬é’¥å°†æ˜¯ä¼ªé€ çš„ï¼Œæ•°å­—ç­¾åå°†å¤±æ•ˆã€‚æ‰€ä»¥åœ¨éªŒè¯ç­¾åä¹‹å‰ï¼Œé¦–å…ˆå¾—å…ˆéªŒè¯å…¬é’¥çš„åˆæ³•æ€§</p>
<h2 id="é—®é¢˜å››ï¼šå¦‚ä½•éªŒè¯å…¬é’¥çš„åˆæ³•æ€§ï¼Ÿ"><a href="#é—®é¢˜å››ï¼šå¦‚ä½•éªŒè¯å…¬é’¥çš„åˆæ³•æ€§ï¼Ÿ" class="headerlink" title="é—®é¢˜å››ï¼šå¦‚ä½•éªŒè¯å…¬é’¥çš„åˆæ³•æ€§ï¼Ÿ"></a>é—®é¢˜å››ï¼šå¦‚ä½•éªŒè¯å…¬é’¥çš„åˆæ³•æ€§ï¼Ÿ</h2><h2 id="è¯ä¹¦"><a href="#è¯ä¹¦" class="headerlink" title="è¯ä¹¦"></a>è¯ä¹¦</h2><p>è¯ä¹¦ï¼Œè”æƒ³çš„æ˜¯é©¾é©¶è¯ã€æ¯•ä¸šè¯ã€è‹±è¯­å››å…­çº§è¯ç­‰ç­‰ï¼Œéƒ½æ˜¯ç”±æƒå¨æœºæ„è®¤è¯çš„ï¼Œå¯†ç å­¦ä¸­çš„è¯ä¹¦ï¼Œå…¨ç§°å«å…¬é’¥è¯ä¹¦ï¼ˆPublic-key Certificateï¼ŒPKCï¼‰ï¼Œè·Ÿé©¾é©¶è¯ç±»ä¼¼é‡Œé¢æœ‰å§“åã€é‚®ç®±ç­‰ä¸ªäººä¿¡æ¯ï¼Œä»¥åŠæ­¤äººçš„å…¬é’¥å¹¶ç”±è®¤è¯æœºæ„ï¼ˆCertificate Authorityï¼ŒCAï¼‰æ–½åŠ æ•°å­—ç­¾åã€‚</p>
<p>CAå°±æ˜¯èƒ½å¤Ÿè®¤å®šâ€œå…¬é’¥ç¡®å®å±äºæ­¤äººâ€å¹¶èƒ½å¤Ÿç”Ÿæˆæ•°å­—ç­¾åçš„ä¸ªäººæˆ–è€…ç»„ç»‡ï¼Œæœ‰å›½é™…æ€§ç»„ç»‡ã€æ”¿åºœè®¾ç«‹çš„ç»„ç»‡ï¼Œæœ‰é€šè¿‡æä¾›è®¤è¯æœåŠ¡æ¥ç›ˆåˆ©çš„ä¼ä¸šï¼Œä¸ªäººä¹Ÿå¯ä»¥æˆç«‹è®¤è¯æœºæ„ã€‚</p>
<p>è®¤è¯è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p>CA æœºæ„ä¹Ÿæ‹¥æœ‰ä¸€ä¸ªå¯†é’¥å¯¹ï¼Œæ¯”å¦‚ RSA å¯†é’¥å¯¹ï¼ˆä¸æœ åŠ¡å™¨ çš„ RSA å¯†é’¥å¯¹æ²¡æœ‰ä»»ä½•å…³ç³»ï¼‰ï¼Œå®ƒç”¨ç§é’¥å¯¹è¯ä¹¦è¿›è¡Œæ•°å­—ç­¾å ï¼Œå°†ç­¾åçš„è¯ä¹¦å‘é€ç»™æœåŠ¡å™¨ã€‚æµè§ˆå™¨å†è¿æ¥æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å‘é€è¯ä¹¦ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨æ‹¥æœ‰ CA æœºæ„çš„å…¬é’¥ï¼ˆå†…åµŒåœ¨æµè§ˆå™¨ ä¸­ï¼‰ï¼Œç„¶åæ ¡éªŒè¯ä¹¦çš„ç­¾åï¼Œä¸€æ—¦æ ¡éªŒæˆåŠŸï¼Œå°±ä»£è¡¨è¿™ä¸ªè¯ä¹¦æ˜¯å¯ä¿¡çš„ CA æœºæ„ç­¾å‘çš„ã€‚</p>
<p>æˆåŠŸéªŒè¯ç­¾ååªèƒ½è¡¨ç¤ºè¯¥è¯ä¹¦æ˜¯ CA æœºæ„ç­¾å‘çš„ï¼Œå¹¶ä¸ä»£è¡¨ç¡®è®¤äº†èº«ä»½ï¼Œæµè§ˆå™¨ä¼šç»§ç»­æ ¡éªŒï¼Œæ¯”å¦‚ç”¨æˆ·è®¿é—®çš„ç½‘å€æ˜¯<a href="https://www.example.com" target="_blank" rel="noopener">https://www.example.com</a> æµè§ˆå™¨æ¥æ”¶åˆ°æœåŠ¡å™¨å‘é€è¿‡æ¥çš„è¯ä¹¦ï¼ŒéªŒè¯ç­¾ååï¼Œå‘ç°è¯ä¹¦åŒ…å«çš„åŸŸåä¹Ÿæ˜¯ <a href="http://www.example.com" target="_blank" rel="noopener">www.example.com</a> ä»£è¡¨æ ¡éªŒèº«ä»½æˆåŠŸï¼Œ æœ€åæµè§ˆå™¨ä»è¯ä¹¦ä¸­è·å–æœåŠ¡å™¨çš„å…¬é’¥ï¼Œç”¨æ¥è¿›è¡Œå¯†é’¥åå•†ã€‚</p>
<p><img src="/2019/11/18/encrypt-and-decrypt/encrypt-and-decrypt_11.jpeg" alt></p>
<ul>
<li>æœåŠ¡å™¨å®ä½“ï¼ˆ end entity ï¼‰ï¼Œå°±æ˜¯éœ€è¦ç”³è¯·è¯ä¹¦çš„å®ä½“ï¼Œ æ¯”å¦‚ <a href="http://www.example.com" target="_blank" rel="noopener">www.example.com</a> åŸŸåçš„æ‹¥æœ‰è€…å¯ä»¥ç”³è¯·ä¸€å¼ è¯ä¹¦ï¼Œè¯ä¹¦èƒ½å¤Ÿè¯æ˜ <a href="http://www.example.com" target="_blank" rel="noopener">www.example.com</a> åŸŸåæ‰€æœ‰è€…çš„èº«ä»½ã€‚</li>
<li>æµè§ˆå™¨å……å½“è¯ä¹¦æ ¡éªŒæ–¹ï¼Œæ–¹å¿…é¡»å……åˆ†ä¿¡ä»»ç¬¬ä¸‰æ–¹ CA æœºæ„ï¼Œæµè§ˆå™¨é›†æˆäº†å„ä¸ª CA æœºæ„çš„æ ¹è¯ä¹¦ã€‚</li>
<li>CA æœºæ„ï¼ŒCA æ˜¯è¯ä¹¦ç­¾å‘æœºæ„ï¼Œåœ¨å®¡æ ¸æœåŠ¡å™¨å®ä½“çš„æœ‰æ•ˆèº«ä»½åï¼Œç»™å…¶ç­¾å‘è¯ä¹¦ï¼Œè¯ä¹¦æ˜¯ç”¨ CA æœºæ„çš„å¯†é’¥å¯¹ï¼ˆæ¯”å¦‚ RSA å¯†é’¥å¯¹ï¼‰å¯¹æœåŠ¡å™¨å®ä½“è¯ä¹¦è¿›è¡Œç­¾åã€‚</li>
<li>è¯ä¹¦ä»“åº“ï¼ŒCA æœºæ„ç­¾å‘çš„è¯ä¹¦å…¨éƒ¨ä¿å­˜åœ¨ä»“åº“ä¸­ï¼Œè¯ä¹¦ä¹Ÿå¯èƒ½è¿‡æœŸæˆ–è€…è¢«åŠé”€ï¼ŒCA æœºæ„åŠé”€çš„è¯ä¹¦ç§°ä¸ºè¯ä¹¦åŠé”€åˆ—è¡¨ CRL (Certificate Revocation Listï¼‰ã€‚</li>
<li>OCSP ( Online Certificate Status Protocolï¼‰åœ¨çº¿è¯ä¹¦çŠ¶æ€åè®®ï¼Œæ˜¯ä¸ºäº†è·å–è¯ä¹¦çš„åŠé”€çŠ¶æ€ï¼Œéœ€è¦éƒ¨ç½²ä¸“é—¨çš„æœåŠ¡ï¼Œè¿™äº›æœåŠ¡ç”± CA æœºæ„æä¾›ï¼Œé€šè¿‡æ•°å­—ç­¾åæŠ€æœ¯ä¿æŠ¤ã€‚å…¶æ ¡éªŒè¿‡ç¨‹ï¼šæµè§ˆå™¨è´Ÿè´£å‘é€ OCSP è¯·æ±‚ï¼Œç„¶åç­‰å¾… OCSP å“åº”ï¼Œæœ€ç»ˆå®Œæˆè¯ä¹¦åŠé”€çŠ¶æ€çš„æ£€æŸ¥ã€‚</li>
</ul>
<h2 id="iOSç­¾åæœºåˆ¶"><a href="#iOSç­¾åæœºåˆ¶" class="headerlink" title="iOSç­¾åæœºåˆ¶"></a>iOSç­¾åæœºåˆ¶</h2><p>å‰é¢è®²äº†è¿™ä¹ˆå¤šï¼Œä¸»è¦æ˜¯ä¸€äº›åŠ å¯†ã€è§£å¯†ã€æ•°å­—ç­¾åå’Œè¯ä¹¦ç­‰åŸºç¡€çŸ¥è¯†ï¼Œå¼€å§‹è¿›å…¥é‡ç‚¹äº†å“ˆ</p>
<p>iOSç­¾åçš„ä½œç”¨</p>
<p>iOSç­¾åæœºåˆ¶çš„ä½œç”¨å°±æ˜¯ä¿è¯å®‰è£…åˆ°ç”¨æˆ·æ‰‹æœºä¸Šçš„APPéƒ½æ˜¯ç»è¿‡Appleå®˜æ–¹å…è®¸çš„ï¼Œé¦–è¦ä»»åŠ¡æ˜¯ä¿è¯è®¾å¤‡åŠç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œåªæœ‰è¢«è‹¹æœè®¾å¤‡è®¤å¯çš„è¯ä¹¦ç­¾åçš„ä»£ç æ‰èƒ½å¤Ÿè¢«æ‰§è¡Œï¼Œå¦åˆ™åœ¨å®‰è£…æˆ–è€…è¿è¡Œæ—¶ä¼šå› ä¸ºæ— æ³•é€šè¿‡å†…æ ¸çš„ç­¾åæ ¡éªŒè€Œå¤±è´¥ã€‚iOSçš„ç³»ç»Ÿä¸­å†…ç½®äº†æ¥è‡ªè‹¹æœçš„CAè¯ä¹¦ï¼Œç³»ç»Ÿè‡ªèº«çš„ä»£ç éƒ½æ˜¯è¢«è‹¹æœâ€ç­¾åâ€œè¿‡çš„ï¼Œ è€Œç”¨æˆ·ä»AppStoreä¸‹è½½çš„Appä¹Ÿéƒ½å·²è¢«è‹¹æœå®˜æ–¹è¿›è¡Œç­¾åã€‚ç­¾åæœºåˆ¶å¯ä»¥æœ‰æ•ˆåœ°é˜²æ­¢æ¥è‡ªå¤–éƒ¨çš„æ”»å‡»ã€‚</p>
<p>é™åˆ¶appçš„è¡Œä¸ºï¼Œæ¯”å¦‚å¯è¯»å†™çš„è·¯å¾„ï¼Œå…è®¸è®¿é—®çš„ç¡¬ä»¶ï¼Œå…è®¸ä½¿ç”¨çš„æœåŠ¡ç­‰ç­‰ï¼Œè¿™äº›æ˜¯æ²™ç›’(Sandbox)æŠ€æœ¯ï¼Œé€šå¸¸æ‰€è¯´çš„Entitlements(æˆæƒæ–‡ä»¶)ï¼Œä¹Ÿå°±æ˜¯æŒ‡iOSæ²™ç›’çš„é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­å£°æ˜äº†appæ‰€éœ€çš„æƒé™ï¼Œå¦‚æœappä¸­ä½¿ç”¨åˆ°äº†æŸé¡¹æ²™ç›’é™åˆ¶çš„åŠŸèƒ½ï¼Œä½†æ²¡æœ‰å£°æ˜å¯¹åº”çš„æƒé™ï¼Œå¯èƒ½è¿è¡Œåˆ°ç›¸å…³çš„ä»£ç æ—¶ä¼šç›´æ¥Crashï¼Œå½“ç„¶æäº¤å®¡æ ¸çš„æ—¶å€™ä¹Ÿæ˜¯æ— æ³•é€šè¿‡çš„ã€‚Entitlementsä¹Ÿæ˜¯å¼ºåˆ¶ç­¾åçš„ï¼Œå¦‚æœEntitlementsæ–‡ä»¶å¯ä»¥è¢«ä»»æ„ä¿®æ”¹ï¼Œé‚£ä¹ˆSandboxä¹Ÿå°±å¤±å»äº†æ„ä¹‰ã€‚å¯¹äºè¶Šç‹±æ¥è¯´ï¼Œå¦‚æœæ— æ³•ç»•è¿‡ç­¾åå’ŒSandboxï¼Œå†å¼ºå¤§çš„ææƒæ¼æ´ä¹Ÿæ— è®¡å¯æ–½ã€‚</p>
<p>ç­¾åè¿˜ç»™è‹¹æœå¸¦æ¥äº†ä¸€ä¸ªå·¨å¤§çš„å¥½å¤„ï¼šAppåˆ†å‘çš„ç»å¯¹æ§åˆ¶æƒã€‚å…¬å¼€å‘è¡ŒAppçš„åˆæ³•é€”å¾„æœ‰ä¸”åªæœ‰ä¸€ç§ï¼Œå°±æ˜¯ä¸Šä¼ åˆ°è‹¹æœå®˜æ–¹çš„AppStoreä¾›ç”¨æˆ·ä¸‹è½½ã€‚è‹¹æœä¼šå¯¹Appè¿›è¡Œä¸¥æ ¼çš„å®¡æŸ¥å¹¶ç­¾åï¼ŒAppçš„åŠŸèƒ½åŠæ”¯ä»˜æ¸ é“ä¹Ÿå› æ­¤å¯ä»¥å—è‹¹æœçš„ä¸¥æ ¼ç®¡åˆ¶ï¼Œä¹Ÿå¸¦äº†å·¨å¤§çš„ç»æµæ•ˆç›Šã€‚</p>
<p>ä¸ç®¡æ˜¯çœŸæœºè°ƒè¯•ï¼Œè¿˜æ˜¯å‘å¸ƒAPPï¼Œå¼€å‘è€…éƒ½éœ€è¦ç»è¿‡ä¸€ç³»åˆ—å¤æ‚çš„æ­¥éª¤</p>
<ul>
<li>ç”ŸæˆCertificateSigningRequest.certSigningRequestæ–‡ä»¶</li>
<li>è·å¾—ios_development.cer\ios_distribution.cerè¯ä¹¦æ–‡ä»¶</li>
<li>æ³¨å†Œdeviceã€æ·»åŠ App ID</li>
<li>è·å¾—*.mobileprovisionæ–‡ä»¶</li>
</ul>
<p>å½“ç„¶ï¼Œå¯¹äºçœŸæœºè°ƒè¯•ï¼Œç°åœ¨çš„Xcodeå·²ç»è‡ªåŠ¨å¸®å¼€å‘è€…åšäº†ä»¥ä¸Šæ“ä½œï¼Œå¹³æ—¶å¼€å‘è¿‡ç¨‹ä¸­ä¹Ÿæ— éœ€å…³å¿ƒ</p>
<p>iOS è®¾å¤‡å®‰è£… APPæœ‰å››ç§ï¼š</p>
<ol>
<li>App Store ä¸Šä¸‹è½½å®‰è£…</li>
<li>å¼€å‘ App æ—¶å¯ä»¥ç›´æ¥æŠŠå¼€å‘ä¸­çš„åº”ç”¨å®‰è£…è¿›æ‰‹æœºè¿›è¡Œè°ƒè¯•ã€‚</li>
<li>In-House ä¼ä¸šå†…éƒ¨åˆ†å‘ï¼Œå¯ä»¥ç›´æ¥å®‰è£…ä¼ä¸šè¯ä¹¦ç­¾ååçš„ APPã€‚</li>
<li>AD-Hoc ç›¸å½“äºä¼ä¸šåˆ†å‘çš„é™åˆ¶ç‰ˆï¼Œé™åˆ¶å®‰è£…è®¾å¤‡æ•°é‡ï¼Œè¾ƒå°‘ç”¨ã€‚</li>
</ol>
<p>å…ˆä»ç®€å•çš„è¯´èµ·ï¼šApp Store ä¸Šä¸‹è½½å®‰è£…ï¼Œå…¶å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š<br>è‹¹æœå®˜æ–¹ç”Ÿæˆä¸€å¯¹å…¬ç§é’¥ï¼Œåœ¨ iOS é‡Œå†…ç½®ä¸€ä¸ªå…¬é’¥ï¼Œç§é’¥ç”±è‹¹æœåå°ä¿å­˜ï¼Œæˆ‘ä»¬ä¼  App ä¸Š AppStore æ—¶ï¼Œè‹¹æœåå°ç”¨ç§é’¥å¯¹ APP æ•°æ®è¿›è¡Œç­¾åï¼ŒiOS ç³»ç»Ÿä¸‹è½½è¿™ä¸ª APP åï¼Œç”¨å…¬é’¥éªŒè¯è¿™ä¸ªç­¾åï¼Œè‹¥ç­¾åæ­£ç¡®ï¼Œè¿™ä¸ª APP è‚¯å®šæ˜¯ç”±è‹¹æœåå°è®¤è¯çš„ï¼Œå¹¶ä¸”æ²¡æœ‰è¢«ä¿®æ”¹è¿‡</p>
<p><img src="/2019/11/18/encrypt-and-decrypt/encrypt-and-decrypt_12.jpeg" alt></p>
<p>è‹¹æœè¦å¯¹å…¶å®ƒä¸‰ç§æ–¹å¼å®‰è£…çš„ App çš„æ§åˆ¶å°±æ²¡é‚£ä¹ˆç®€å•äº†ï¼Œæ–¹æ¡ˆæ˜¯ä½¿ç”¨äº†åŒå±‚ç­¾å</p>
<p><img src="/2019/11/18/encrypt-and-decrypt/encrypt-and-decrypt_02.png" alt></p>
<p>è¿‡ç¨‹ç”¨æ–‡å­—æ¥æè¿°ï¼š</p>
<ol>
<li>åœ¨ä½ çš„ Mac å¼€å‘æœºå™¨ç”Ÿæˆä¸€å¯¹å…¬ç§é’¥ï¼Œ</li>
<li>è‹¹æœè‡ªå·±æœ‰å›ºå®šçš„ä¸€å¯¹å…¬ç§é’¥ï¼Œè·Ÿä¸Šé¢ AppStore ä¾‹å­ä¸€æ ·ï¼Œç§é’¥åœ¨è‹¹æœåå°ï¼Œå…¬é’¥åœ¨æ¯ä¸ª iOS è®¾å¤‡ä¸Šã€‚</li>
<li>æŠŠMacå…¬é’¥ä¼ åˆ°è‹¹æœåå°ï¼Œç”¨è‹¹æœåå°é‡Œçš„ç§é’¥å»ç­¾åMacå…¬é’¥ã€‚å¾—åˆ°ä¸€ä»½æ•°æ®åŒ…å«äº†Macå…¬é’¥ä»¥åŠå…¶ç­¾åï¼ŒæŠŠè¿™ä»½æ•°æ®ç§°ä¸ºè¯ä¹¦ã€‚</li>
<li>åœ¨è‹¹æœåå°ç”³è¯· AppIDï¼Œé…ç½®å¥½è®¾å¤‡ ID åˆ—è¡¨å’Œ APP å¯ä½¿ç”¨çš„æƒé™ï¼Œå†åŠ ä¸Šç¬¬3æ­¥çš„è¯ä¹¦ï¼Œç»„æˆçš„æ•°æ®ç”¨è‹¹æœç§æœ‰ç­¾åï¼ŒæŠŠæ•°æ®å’Œç­¾åä¸€èµ·ç»„æˆä¸€ä¸ª Provisioning Profile æ–‡ä»¶ï¼Œä¸‹è½½åˆ°æœ¬åœ° Mac å¼€å‘æœºã€‚</li>
<li>åœ¨å¼€å‘æ—¶ï¼Œç¼–è¯‘å®Œä¸€ä¸ª APP åï¼Œç”¨æœ¬åœ°çš„å¯¹è¿™ä¸ª APP è¿›è¡Œç­¾åï¼ŒåŒæ—¶æŠŠç¬¬4æ­¥å¾—åˆ°çš„ Provisioning Profile æ–‡ä»¶æ‰“åŒ…è¿› APP é‡Œï¼Œæ–‡ä»¶åä¸º embedded.mobileprovisionï¼ŒæŠŠ APP å®‰è£…åˆ°æ‰‹æœºä¸Šã€‚</li>
<li>åœ¨å®‰è£…æ—¶ï¼ŒiOS ç³»ç»Ÿå–å¾—è¯ä¹¦ï¼Œé€šè¿‡ç³»ç»Ÿå†…ç½®çš„è‹¹æœå…¬é’¥ï¼Œå»éªŒè¯ embedded.mobileprovision çš„æ•°å­—ç­¾åæ˜¯å¦æ­£ç¡®ï¼Œé‡Œé¢çš„è¯ä¹¦ç­¾åä¹Ÿä¼šå†éªŒä¸€éã€‚</li>
<li>ç¡®ä¿äº† embedded.mobileprovision é‡Œçš„æ•°æ®éƒ½æ˜¯è‹¹æœæˆæƒä»¥åï¼Œå°±å¯ä»¥å–å‡ºé‡Œé¢çš„æ•°æ®ï¼Œåšå„ç§éªŒè¯ï¼ŒåŒ…æ‹¬ç”¨Macå…¬é’¥éªŒè¯APPç­¾åï¼ŒéªŒè¯è®¾å¤‡ ID æ˜¯å¦åœ¨ ID åˆ—è¡¨ä¸Šï¼ŒAppID æ˜¯å¦å¯¹åº”å¾—ä¸Šï¼Œæƒé™å¼€å…³æ˜¯å¦è·Ÿ APP é‡Œçš„ Entitlements å¯¹åº”ç­‰ã€‚</li>
</ol>
<p>æ€»ç»“ä¸€ä¸‹è¿™äº›æ¦‚å¿µï¼š</p>
<ul>
<li>è¯ä¹¦ï¼šå†…å®¹æ˜¯å…¬é’¥æˆ–ç§é’¥ï¼Œç”±å…¶ä»–æœºæ„å¯¹å…¶ç­¾åç»„æˆçš„æ•°æ®åŒ…ã€‚</li>
<li>Entitlementsï¼šåŒ…å«äº† App æƒé™å¼€å…³åˆ—è¡¨ã€‚</li>
<li>CertificateSigningRequestï¼šæœ¬åœ°å…¬é’¥ã€‚</li>
<li>p12ï¼šæœ¬åœ°ç§é’¥ï¼Œå¯ä»¥å¯¼å…¥åˆ°å…¶ä»–ç”µè„‘ã€‚</li>
<li>Provisioning Profileï¼šåŒ…å«äº† è¯ä¹¦ / Entitlements ç­‰æ•°æ®ï¼Œå¹¶ç”±è‹¹æœåå°ç§é’¥ç­¾åçš„æ•°æ®åŒ…ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>è¶…çº§ç­¾å</tag>
      </tags>
  </entry>
  <entry>
    <title>è¶…çº§ç­¾åè¯¦ç»†å®ç°</title>
    <url>/2019/11/14/%E8%B6%85%E7%BA%A7%E7%AD%BE%E5%90%8D%E8%AF%A6%E7%BB%86%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<p><img src="/2019/11/14/%E8%B6%85%E7%BA%A7%E7%AD%BE%E5%90%8D%E8%AF%A6%E7%BB%86%E5%AE%9E%E7%8E%B0/20191114_06.jpg" alt="20191114_06"></p>
<p>Because you have never seen the miracle. - ã€Šé“¶ç¿¼æ€æ‰‹2049ã€‹</p>
<h2 id="è¶…çº§ç­¾åæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#è¶…çº§ç­¾åæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="è¶…çº§ç­¾åæ˜¯ä»€ä¹ˆï¼Ÿ"></a>è¶…çº§ç­¾åæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æ‰€è°“çš„è¶…çº§ç­¾åï¼Œå…¶å®ä¸€å¥è¯å°±èƒ½è¯´æ¸…æ¥šï¼šä½¿ç”¨äº†è‹¹æœæä¾›ç»™å¼€å‘è€…çš„Ad-Hocåˆ†å‘é€šé“ï¼ŒæŠŠå®‰è£…è®¾å¤‡å½“åšå¼€å‘è®¾å¤‡è¿›è¡Œåˆ†å‘ã€‚</p>
<p>ä¼˜åŠ¿ï¼šç›´æ¥åˆ†å‘ï¼Œå®‰è£…å³å¯è¿è¡Œï¼Œä¸éœ€è¦ç”¨æˆ·åšä¼ä¸šè¯ä¹¦çš„ä¿¡ä»»æ“ä½œï¼Œä¸ä¼šæœ‰è¯ä¹¦åŠé”€å¯¼è‡´çš„é£é™©<br>åŠ£åŠ¿ï¼šæˆæœ¬æ˜‚è´µï¼Œå•å¼€å‘è€…è´¦å·çš„iPhoneè®¾å¤‡æ•°é‡åªæœ‰100ä¸ªï¼Œ</p>
<a id="more"></a>

<h3 id="å®ç°æµç¨‹"><a href="#å®ç°æµç¨‹" class="headerlink" title="å®ç°æµç¨‹"></a>å®ç°æµç¨‹</h3><p><img src="/2019/11/14/%E8%B6%85%E7%BA%A7%E7%AD%BE%E5%90%8D%E8%AF%A6%E7%BB%86%E5%AE%9E%E7%8E%B0/20191114_05.jpg?40" alt></p>
<ol>
<li>æ‰‹æœºå®‰è£…<code>.mobileconf</code>æ–‡ä»¶ï¼Œå°†UDIDå‘ç»™æœåŠ¡å™¨</li>
<li>æœåŠ¡å™¨å°†æ”¶åˆ°çš„UDIDæ³¨å†Œåˆ°è‹¹æœå¼€å‘è€…è´¦å·ä¸­ï¼Œå¹¶æ›´æ–°æè¿°æ–‡ä»¶</li>
<li>å°†æ›´æ–°åçš„æè¿°æ–‡ä»¶æ¥é‡ç­¾App</li>
<li>æœ€åå°†é‡ç­¾çš„Appä¸Šä¼ è‡³cdnï¼Œåˆ©ç”¨<code>itms-services</code>æ–¹å¼åšåˆ†å‘ä¸‹è½½</li>
</ol>
<h3 id="è¯¦ç»†å®ç°ç»†èŠ‚"><a href="#è¯¦ç»†å®ç°ç»†èŠ‚" class="headerlink" title="è¯¦ç»†å®ç°ç»†èŠ‚"></a>è¯¦ç»†å®ç°ç»†èŠ‚</h3><ol>
<li><p>å‡†å¤‡å¥½è·å–UDIDçš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯<code>.mobileconf</code>æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¤§è‡´å¦‚ä¸‹:</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>PayloadContent<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">key</span>&gt;</span>URL<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">!â€“</span> æ¥æ”¶æ•°æ®çš„æ¥å£åœ°å€ â€“&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">string</span>&gt;</span>http://106.54.214.191:443/udid/receive<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">key</span>&gt;</span>DeviceAttributes<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>UDID<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>IMEI<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>ICCID<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>VERSION<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>PRODUCT<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>PayloadOrganization<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>www.qianniuniu.com<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>PayloadDisplayName<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>Test<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>PayloadVersion<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">integer</span>&gt;</span>1<span class="tag">&lt;/<span class="name">integer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>PayloadUUID<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>8C7AD0B8-3900-44DF-A52F-3C4F92921807<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>PayloadIdentifier<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>com.super.signature<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>PayloadDescription<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>è¯¥é…ç½®æ–‡ä»¶å°†å¸®åŠ©ç”¨æˆ·è·å–å½“å‰iOSè®¾å¤‡çš„UDIDå·ç ã€‚This temporary profile will be used to find and display your current device's UDID.<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>PayloadType<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>Profile Service<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨æœåŠ¡å™¨httpsè¯ä¹¦å¯¹é…ç½®æ–‡ä»¶ç­¾å</p>
<p> <img src="/2019/11/14/%E8%B6%85%E7%BA%A7%E7%AD%BE%E5%90%8D%E8%AF%A6%E7%BB%86%E5%AE%9E%E7%8E%B0/super-sign_08.png" alt></p>
<p> ä¸Šå›¾æ˜¯æœåŠ¡å™¨ç«¯ç”Ÿæˆçš„è¯ä¹¦æ–‡ä»¶ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯Apacheæ–‡ä»¶å¤¹ä¸‹é¢çš„</p>
<p> <img src="/2019/11/14/%E8%B6%85%E7%BA%A7%E7%AD%BE%E5%90%8D%E8%AF%A6%E7%BB%86%E5%AE%9E%E7%8E%B0/super-sign_07.png" alt></p>
<p> <code>mbaike.crt</code>ï¼šhttpsæœåŠ¡å™¨ç«¯ä½¿ç”¨è¯ä¹¦æ–‡ä»¶ã€‚<br> <code>mbaike.key</code>ï¼šhttpsæœåŠ¡å™¨ç«¯ä½¿ç”¨è¯ä¹¦å¯¹åº”çš„å¯†é’¥ã€‚<br> <code>root_bundle.pem</code>ï¼šä¸SSLè¯ä¹¦å¯¹åº”çš„è¯ä¹¦é“¾ï¼ˆä¸­çº§è¯ä¹¦ï¼‰ã€‚<br> <code>unsigned.mobilecofig</code> æ–‡ä»¶ï¼šIOSç«¯ç”Ÿæˆçš„æœªç­¾åçš„é…ç½®æè¿°æ–‡ä»¶ã€‚</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å†ä½¿ç”¨é€šè¿‡opensslå‘½ä»¤ç”Ÿæˆç­¾ååçš„signed.mobileconfigæ–‡ä»¶</span><br><span class="line">openssl smime -sign -in unsigned.mobileconfig -out signed.mobileconfig -signer mbaike.crt -inkey mbaike.key -certfile root_bundle.pem -outform der -nodetach</span><br><span class="line"></span><br><span class="line"># ä¹Ÿå¯ä»¥æŠŠkeyæ–‡ä»¶çš„å¯†ç å†™å…¥åˆ°keyæ–‡ä»¶ä¸­</span><br><span class="line">openssl rsa -in mbaike.key -out mbaikenopass.key</span><br><span class="line"></span><br><span class="line"># ç¬¬äºŒæ­¥çš„å‘½ä»¤å°±åº”è¯¥æ˜¯</span><br><span class="line">openssl smime -sign -in unsigned.mobileconfig -out signed.mobileconfig -signer mbaike.crt -inkey mbaikenopass.key -certfile root_bundle.pem -outform der -nodetach</span><br></pre></td></tr></table></figure>
<p> è¿™æ ·å°±å®Œæˆäº†å¯¹ <code>mobileconfig</code> çš„ç­¾åå·¥ä½œäº†</p>
<p> <img src="/2019/11/14/%E8%B6%85%E7%BA%A7%E7%AD%BE%E5%90%8D%E8%AF%A6%E7%BB%86%E5%AE%9E%E7%8E%B0/20191114_03.png" alt></p>
</li>
<li><p>ä¸Šå›¾æ˜¯ä¸­ç‚¹å‡» â€œè·å–UDIDâ€ ï¼Œå°±ä¼šè·³åˆ°è®¾ç½® -&gt; é€šç”¨ -&gt; æè¿°æ–‡ä»¶ å»å®‰è£…å·²ç»ç­¾åçš„æè¿°æ–‡ä»¶</p>
<p> <img src="/2019/11/14/%E8%B6%85%E7%BA%A7%E7%AD%BE%E5%90%8D%E8%AF%A6%E7%BB%86%E5%AE%9E%E7%8E%B0/20191114_02.png" alt></p>
<p> å¦‚å›¾æ˜¾ç¤ºå·²ç­¾åï¼Œè¯´æ˜ç¬¬äºŒæ­¥å¯¹ <code>.mobilecofig</code> çš„ç­¾åæ˜¯OKçš„ï¼Œå®‰è£…æˆåŠŸåï¼Œè¿”å›ä¸‹è½½é¡µé¢å¹¶è°ƒç”¨<code>http://106.54.214.191:443/udid/receive</code>è¿™ä¸ªåœ°å€ï¼ŒæœåŠ¡å™¨ç«¯å°±ä¼šæ”¶åˆ°UDIDç­‰ä¿¡æ¯</p>
</li>
</ol>
<ol start="4">
<li><p>åˆ©ç”¨å¼€æºå·¥å…·Spaceshipï¼Œæ³¨å†Œæ–°çš„å¼€å‘è€…è®¾å¤‡åˆ°è‹¹æœå¼€å‘è€…ä¸­å¿ƒï¼Œå¹¶æ›´æ–° Provisioning Profileï¼ŒæœåŠ¡å™¨ç«¯ä½¿ç”¨çš„æ˜¯ ruby è„šæœ¬æ¥å®Œæˆè¿™ä¸ªåŠŸèƒ½ï¼š</p>
 <figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/ruby -w</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">"spaceship"</span></span><br><span class="line"></span><br><span class="line">puts <span class="string">"======Hello, Write Start======"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å…ˆç™»å½•</span></span><br><span class="line">Spaceship::Portal.login(<span class="string">"1711218908@qq.com"</span>, <span class="string">"å¯†ç "</span>)</span><br><span class="line"></span><br><span class="line">is_bundle = Spaceship.app.find(<span class="string">"com.super01.signature"</span>)</span><br><span class="line"><span class="keyword">if</span> !is_bundle</span><br><span class="line">Spaceship.app.create!(bundle_id: <span class="string">"com.super01.signature"</span>, name: <span class="string">'iosudid'</span>)</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"><span class="comment">#groupæƒé™</span></span><br><span class="line">app = Spaceship::Portal.app.find(<span class="string">"com.super01.signature"</span>)</span><br><span class="line"></span><br><span class="line">group = Spaceship::Portal.app_group.find(<span class="string">"group.com.super01.signature"</span>)</span><br><span class="line"><span class="keyword">if</span> !group</span><br><span class="line">    group = Spaceship::Portal.app_group.create!(group_id: <span class="string">"group.com.super01.signature"</span>,name: <span class="string">"Another group"</span>)</span><br><span class="line">end</span><br><span class="line">app = app.associate_groups([group])</span><br><span class="line">app.update_service(Spaceship::Portal.app_service.network_extension.on)</span><br><span class="line">app.update_service(Spaceship::Portal.app_service.access_wifi.on)</span><br><span class="line">app.update_service(Spaceship::Portal.app_service.push_notification.on)</span><br><span class="line">app.update_service(Spaceship::Portal.app_service.game_center.on)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å¢è®¾å¤‡çš„UDID</span></span><br><span class="line">Spaceship::Portal.device.create!(name: <span class="string">"ç‹æ–¹"</span>, udid: <span class="string">"7d7da5ba1d924d43b512c9ba9f976fdf47085209"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ›´æ–°è®¾å¤‡</span></span><br><span class="line">allDevices = Spaceship.device.all</span><br><span class="line">device_profiles = Spaceship::Portal.provisioning_profile.ad_hoc.find_by_bundle_id(bundle_id: <span class="string">"com.super01.signature"</span>)</span><br><span class="line">device_profiles.each <span class="keyword">do</span> |profile|</span><br><span class="line">    profile.devices = allDevices</span><br><span class="line">    profile.update!</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸‹è½½æè¿°æ–‡ä»¶</span></span><br><span class="line">matching_profiles = Spaceship::Portal.provisioning_profile.ad_hoc.find_by_bundle_id(bundle_id: <span class="string">"com.super01.signature"</span>)</span><br><span class="line"><span class="keyword">if</span> matching_profiles.first</span><br><span class="line">File.write(<span class="string">"SuperSignatureAdHocProfile.mobileprovision"</span>, matching_profiles.first.download)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    cert = Spaceship::Portal.certificate.production.all.first</span><br><span class="line">    profile=Spaceship.provisioning_profile.ad_hoc.create!(bundle_id: <span class="string">"com.super01.signature"</span>, certificate: cert, name: <span class="string">"com.super01.signature adhoc"</span>)</span><br><span class="line">    File.write(<span class="string">"SuperSignatureAdHocProfile.mobileprovision"</span>, profile.download)</span><br><span class="line">end</span><br><span class="line">                        </span><br><span class="line">puts <span class="string">"====== Hello, Write End! ======"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ¶ä½œ.cerè¯ä¹¦ï¼Œè¿™ä¸€æ­¥å’Œæˆ‘ä»¬å¹³æ—¶åšiOSå¼€å‘ä¸€æ ·ï¼Œæˆ‘å°±ä¸å¤šè¯´äº†</p>
</li>
<li><p>é‡ç‚¹æ¥äº†ï¼ŒipaåŒ…çš„é‡ç­¾ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ <a href="https://github.com/zhlynn/zsign" target="_blank" rel="noopener">zsign</a>ï¼Œå°†æ­¥éª¤3ä¸­æ›´æ–°åçš„æè¿°æ–‡ä»¶å’Œæ­¥éª¤4ä¸­çš„è¯ä¹¦æ”¾åœ¨zsigné¡¹ç›®çš„åŒä¸€çº§ç›®å½•ä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p> <img src="/2019/11/14/%E8%B6%85%E7%BA%A7%E7%AD%BE%E5%90%8D%E8%AF%A6%E7%BB%86%E5%AE%9E%E7%8E%B0/20191114_01.png" alt></p>
<p> ä½¿ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./zsign -k key.p12 -p 123 -m SuperSignatureAdHocProfile.prov -o output.ipa SASpecs.app</span><br></pre></td></tr></table></figure>

<p> å°†é‡ç­¾å¥½çš„ipaåŒ…ä¸Šä¼ è‡³cdnæœåŠ¡å™¨æ‹¿åˆ°ä¸‹è½½é“¾æ¥ï¼Œä¸‹ä¸€æ­¥å¼€å§‹åˆ¶ä½œåˆ†å‘æ–‡ä»¶ã€‚</p>
</li>
</ol>
<ol start="7">
<li><p>åˆ†å‘æ–‡ä»¶ï¼ˆ<code>manifest.plist</code>ï¼‰éœ€è¦å‡†å¤‡ä¸¤å¼ å›¾ç‰‡çš„ä¸‹è½½åœ°å€ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>items<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">key</span>&gt;</span>assets<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">key</span>&gt;</span>kind<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">string</span>&gt;</span>software-package<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">key</span>&gt;</span>url<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">string</span>&gt;</span>https://qnnapk-1251122539.cos.ap-shanghai.myqcloud.com/SASpecs.ipa<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">key</span>&gt;</span>kind<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">string</span>&gt;</span>display-image<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">key</span>&gt;</span>url<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">string</span>&gt;</span>https://qnnapk-1251122539.cos.ap-shanghai.myqcloud.com/57.png<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">key</span>&gt;</span>kind<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">string</span>&gt;</span>full-size-image<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">key</span>&gt;</span>url<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">string</span>&gt;</span>https://qnnapk-1251122539.cos.ap-shanghai.myqcloud.com/512.png<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">key</span>&gt;</span>metadata<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key</span>&gt;</span>bundle-identifier<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>com.super.signature<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key</span>&gt;</span>bundle-version<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key</span>&gt;</span>kind<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>software<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key</span>&gt;</span>platform-identifier<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>com.apple.platform.iphoneos<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key</span>&gt;</span>title<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>SASpecs<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å½“ç”¨æˆ·ä¸‹è½½è¿™ä¸ªåˆ†å‘æ–‡ä»¶åå°±ä¼šå®‰è£…å¯¹åº”çš„ipaåŒ…ï¼Œ</p>
</li>
</ol>
<p><img src="/2019/11/14/%E8%B6%85%E7%BA%A7%E7%AD%BE%E5%90%8D%E8%AF%A6%E7%BB%86%E5%AE%9E%E7%8E%B0/20191114_04.PNG" alt></p>
<h2 id="è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆ"><a href="#è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆ" class="headerlink" title="è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆ"></a>è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆ</h2>]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>è¶…çº§ç­¾å</tag>
      </tags>
  </entry>
  <entry>
    <title>Nextä¸»é¢˜è®¾ç½®åˆ†ç±»å’Œæ ‡ç­¾</title>
    <url>/2019/11/13/next-theme-set-tags/</url>
    <content><![CDATA[<p>æœ€è¿‘å°†Hexoçš„ä¸»é¢˜æ¢æˆäº†Nextï¼Œå‘ç°é…ç½® <code>themes/next/_config.yml</code>åï¼Œç‚¹å‡»åˆ†ç±»æˆ–æ ‡ç­¾æ˜¾ç¤ºCannot GET /tags/%20/çš„é—®é¢˜ï¼ŒæŸ¥å®˜æ–¹æ–‡æ¡£å¥½åƒä¹Ÿæ²¡æœ‰å…·ä½“è¯´æ˜ï¼Œåªèƒ½è‡ªå·±å»ä¸€æ­¥ä¸€æ­¥è¯•ï¼Œä¹Ÿè®°å½•ä¸€ä¸‹è§£å†³é—®é¢˜çš„è¿‡ç¨‹ï¼š</p>
<p>ä½¿ç”¨ <code>hexo new page &quot;tags&quot;</code> å’Œ <code>hexo new page &quot;categories&quot;</code> åœ¨sourceç›®å½•ä¸‹ç”Ÿæˆå¯¹åº”çš„æœ¬åœ°æ–‡ä»¶ï¼Œ</p>
<p>ä¿®æ”¹ <code>tags/index.md</code> æ–‡ä»¶</p>
<a id="more"></a>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: åˆ†ç±»</span><br><span class="line">date: 2019-11-13 17:15:12</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ <code>categories/index.md</code> æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: categories</span><br><span class="line">date: 2019-11-13 17:40:15</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ¯æ¬¡å†™çš„æ–°æ–‡ç« é¡¶éƒ¨å†™å…¥categories/tagsçš„valueå€¼, hexoå³å¯è‡ªåŠ¨å¸®ä½ è¿›è¡Œåˆ†ç±»æˆ–æ ‡ç­¾ç®¡ç†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: åŠ å¯†è§£å¯†</span><br><span class="line">date: 2019-02-21 20:38:37</span><br><span class="line">categories: å­¦ä¹ ç¬”è®°</span><br><span class="line">tags: iOS</span><br><span class="line">---</span><br></pre></td></tr></table></figure>


<p>ä¸»é¢˜é…ç½®æ–‡ä»¶ä¹Ÿåˆ«å¿˜äº†æ‰“å¼€ä»¥ä¸‹æ³¨é‡Šï¼Œ</p>
<p>æ³¨æ„ï¼šé‡ç‚¹æ¥äº†</p>
<blockquote>
<p><code>/||</code> ä¹‹é—´å»æ‰ç©ºæ ¼<br><code>/||</code> ä¹‹é—´å»æ‰ç©ºæ ¼<br><code>/||</code> ä¹‹é—´å»æ‰ç©ºæ ¼</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: /|| home</span><br><span class="line">  #about: /about/ || user</span><br><span class="line">  tags: /tags/|| tags</span><br><span class="line">  categories: /categories/|| th</span><br><span class="line">  archives: /archives/|| archive</span><br><span class="line">  #schedule: /schedule/ || calendar</span><br><span class="line">  #sitemap: /sitemap.xml || sitemap</span><br><span class="line">  #commonweal: /404/ || heartbeat</span><br></pre></td></tr></table></figure>

<p><img src="/2019/11/13/next-theme-set-tags/20191112.png" alt="20191112"></p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Flutter ç•Œé¢å¼€å‘è¯¦ç»†ä»‹ç»</title>
    <url>/2019/08/25/Flutter-UI-Develop/</url>
    <content><![CDATA[<h2 id="è·¨å¹³å°å¼€å‘æ–¹æ¡ˆçš„ä¸‰ä¸ªæ—¶ä»£"><a href="#è·¨å¹³å°å¼€å‘æ–¹æ¡ˆçš„ä¸‰ä¸ªæ—¶ä»£" class="headerlink" title="è·¨å¹³å°å¼€å‘æ–¹æ¡ˆçš„ä¸‰ä¸ªæ—¶ä»£"></a>è·¨å¹³å°å¼€å‘æ–¹æ¡ˆçš„ä¸‰ä¸ªæ—¶ä»£</h2><p>Webå®¹å™¨æ—¶ä»£:åŸºäºWebç›¸å…³æŠ€æœ¯é€šè¿‡æµè§ˆå™¨ç»„ä»¶æ¥å®ç°ç•Œé¢åŠåŠŸèƒ½ï¼Œå…¸å‹çš„æ¡†æ¶åŒ…æ‹¬ Cordova(PhoneGap)ã€Ionicå’Œå¾®ä¿¡å°ç¨‹åºã€‚<br>ç¼ºç‚¹ï¼šä¸€ä¸ªå®Œæ•´H5é¡µé¢çš„å±•ç¤ºè¦ç»å†æµ è§ˆå™¨æ§ä»¶çš„åŠ è½½ã€è§£æå’Œæ¸²æŸ“ä¸‰å¤§è¿‡ç¨‹ï¼Œæ€§èƒ½æ¶ˆè€—è¦æ¯”åŸç”Ÿå¼€å‘å¢åŠ Nä¸ªæ•°é‡çº§ï¼Œå†…å­˜å ç”¨å¤šã€ç½‘é¡µåŠ è½½é€Ÿåº¦æ…¢ã€æ¸²æŸ“æ…¢ã€JavaScript æ‰§è¡Œæ…¢ã€äº¤äº’ä½“éªŒå·®ç­‰</p><a id="more"></a>
<p>æ³›Webå®¹å™¨æ—¶ä»£:é‡‡ç”¨ç±»Webæ ‡å‡†è¿›è¡Œå¼€å‘ï¼Œä½†åœ¨è¿è¡Œæ—¶æŠŠç»˜åˆ¶å’Œæ¸²æŸ“äº¤ç”±åŸç”Ÿç³»ç»Ÿæ¥ç®¡çš„æŠ€æœ¯ï¼Œä»£è¡¨æ¡† æ¶æœ‰React Nativeã€Weexå’Œå¿«åº”ç”¨ï¼Œå¹¿ä¹‰çš„è¿˜åŒ…æ‹¬å¤©çŒ«çš„Virtual Viewç­‰ã€‚<br>ç¼ºç‚¹ï¼šéœ€è¦å¤„ç†å¤§é‡å¹³å°ç›¸å…³çš„é€»è¾‘å¤–ï¼Œéšç€ç³»ç»Ÿç‰ˆæœ¬å˜åŒ–å’ŒAPIçš„å˜åŒ–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¤„ç†ä¸åŒå¹³å°çš„åŸç”Ÿ æ§ä»¶æ¸²æŸ“èƒ½åŠ›å·®å¼‚ï¼Œä¿®å¤å„ç±»å¥‡å¥‡æ€ªæ€ªçš„Bugã€‚</p>
<p>è‡ªç»˜å¼•æ“æ—¶ä»£:è‡ªå¸¦æ¸²æŸ“å¼•æ“ï¼Œå®¢æˆ·ç«¯ä»…æä¾›ä¸€å—ç”»å¸ƒå³å¯è·å¾—ä»ä¸šåŠ¡é€»è¾‘åˆ°åŠŸèƒ½å‘ˆç°çš„å¤šç«¯é«˜åº¦ä¸€è‡´çš„ æ¸²æŸ“ä½“éªŒã€‚Flutterï¼Œæ˜¯ä¸ºæ•°ä¸å¤šçš„ä»£è¡¨ã€‚</p>
<p>ä¸‹é¢æ˜¯è·¨å¹³å°å¼€å‘æ–¹æ¡ˆçš„å¯¹æ¯”ï¼š</p>
<table>
<thead>
<tr>
<th>å¼€å‘æ–¹æ¡ˆ</th>
<th>Webå®¹å™¨</th>
<th>RN</th>
<th>Weex</th>
<th>Flutter</th>
</tr>
</thead>
<tbody><tr>
<td>ç±»å‹</td>
<td>Webå®¹å™¨</td>
<td>æ³›Webå®¹å™¨</td>
<td>æ³›Webå®¹å™¨</td>
<td>è‡ªç»˜å¼•æ“</td>
</tr>
<tr>
<td>æ”¯æŒå¹³å°</td>
<td>Android/iOS/Web</td>
<td>Android/iOS</td>
<td>Android/iOS/Web</td>
<td>Android/iOS</td>
</tr>
<tr>
<td>å¼€å‘è¯­è¨€</td>
<td>Javascript</td>
<td>Javascript(React)</td>
<td>Javascript(Vue)</td>
<td>Dart</td>
</tr>
<tr>
<td>æŠ€æœ¯æ ˆ</td>
<td>å‰ç«¯</td>
<td>åå‰ç«¯</td>
<td>åå‰ç«¯</td>
<td>åå®¢æˆ·ç«¯</td>
</tr>
<tr>
<td>åŠ¨æ€åŒ–èƒ½åŠ›</td>
<td>æ”¯æŒ</td>
<td>æ”¯æŒ</td>
<td>æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
</tr>
<tr>
<td>æ¸²æŸ“æ€§èƒ½</td>
<td>å·®</td>
<td>ä¸€èˆ¬</td>
<td>ä¸€èˆ¬</td>
<td>å¥½</td>
</tr>
<tr>
<td>æ»‘åŠ¨æ€§èƒ½</td>
<td>å·®</td>
<td>ä¸€èˆ¬</td>
<td>ä¸€èˆ¬</td>
<td>å¥½</td>
</tr>
<tr>
<td>é¡µé¢çº§æ”¯æŒ</td>
<td>æ”¯æŒ</td>
<td>æ”¯æŒ</td>
<td>æ”¯æŒ</td>
<td>æ”¯æŒ</td>
</tr>
<tr>
<td>åŒºå—çº§æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
<td>æ”¯æŒ</td>
<td>æ”¯æŒ</td>
<td>æ”¯æŒ</td>
</tr>
<tr>
<td>å¼€å‘æ•ˆç‡</td>
<td>é«˜</td>
<td>ä¸€èˆ¬</td>
<td>ä¸€èˆ¬</td>
<td>ä¸€èˆ¬</td>
</tr>
<tr>
<td>ç»´æŠ¤æˆæœ¬</td>
<td>ä½</td>
<td>ä¸€èˆ¬</td>
<td>é«˜</td>
<td>ä½</td>
</tr>
<tr>
<td>ç³»ç»Ÿå‡çº§è§†é¢‘éš¾åº¦</td>
<td>ä½</td>
<td>ä¸­</td>
<td>ä¸­</td>
<td>ä½</td>
</tr>
<tr>
<td>ç¤¾åŒºç”Ÿæ€</td>
<td>æ´»è·ƒ</td>
<td>æ´»è·ƒ</td>
<td>ä¸æ´»è·ƒ</td>
<td>æ´»è·ƒ</td>
</tr>
</tbody></table>
<h2 id="Flutteræ¡†æ¶ä»‹ç»"><a href="#Flutteræ¡†æ¶ä»‹ç»" class="headerlink" title="Flutteræ¡†æ¶ä»‹ç»"></a>Flutteræ¡†æ¶ä»‹ç»</h2><p><img src="/2019/08/25/Flutter-UI-Develop/20191115_01.png" alt></p>
<p>Flutteræ¶æ„é‡‡ç”¨åˆ†å±‚è®¾è®¡ï¼Œä»ä¸‹åˆ°ä¸Šåˆ†ä¸ºä¸‰å±‚ï¼Œä¾æ¬¡ä¸º:Embedderã€Engineã€Frameworkã€‚</p>
<p>Embedderæ˜¯æ“ä½œç³»ç»Ÿé€‚é…å±‚ï¼Œå®ç°äº†æ¸²æŸ“Surfaceè®¾ç½®ï¼Œçº¿ç¨‹è®¾ç½®ï¼Œä»¥åŠå¹³å°æ’ä»¶ç­‰å¹³å°ç›¸å…³ç‰¹æ€§çš„é€‚ é…ã€‚ä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒFlutterå¹³å°ç›¸å…³ç‰¹æ€§å¹¶ä¸å¤šï¼Œè¿™å°±ä½¿å¾—ä»æ¡†æ¶å±‚é¢ä¿æŒè·¨ç«¯ä¸€è‡´æ€§çš„æˆæœ¬ç›¸å¯¹ è¾ƒä½ã€‚</p>
<p>Engineå±‚ä¸»è¦åŒ…å«Skiaã€Dartå’ŒTextï¼Œå®ç°äº†Flutterçš„æ¸²æŸ“å¼•æ“ã€æ–‡å­—æ’ç‰ˆã€äº‹ä»¶å¤„ç†å’ŒDartè¿è¡Œæ—¶ç­‰åŠŸ èƒ½ã€‚Skiaå’ŒTextä¸ºä¸Šå±‚æ¥å£æä¾›äº†è°ƒç”¨åº•å±‚æ¸²æŸ“å’Œæ’ç‰ˆçš„èƒ½åŠ›ï¼ŒDartåˆ™ä¸ºFlutteræä¾›äº†è¿è¡Œæ—¶è°ƒç”¨Dartå’Œ æ¸²æŸ“å¼•æ“çš„èƒ½åŠ›ã€‚è€ŒEngineå±‚çš„ä½œç”¨ï¼Œåˆ™æ˜¯å°†å®ƒä»¬ç»„åˆèµ·æ¥ï¼Œä»å®ƒä»¬ç”Ÿæˆçš„æ•°æ®ä¸­å®ç°è§†å›¾æ¸²æŸ“ã€‚</p>
<p>Frameworkå±‚åˆ™æ˜¯ä¸€ä¸ªç”¨Dartå®ç°çš„UI SDKï¼ŒåŒ…å«äº†åŠ¨ç”»ã€å›¾å½¢ç»˜åˆ¶å’Œæ‰‹åŠ¿è¯†åˆ«ç­‰åŠŸèƒ½ã€‚ä¸ºäº†åœ¨ç»˜åˆ¶æ§ ä»¶ç­‰å›ºå®šæ ·å¼çš„å›¾å½¢æ—¶æä¾›æ›´ç›´è§‚ã€æ›´æ–¹ä¾¿çš„æ¥å£ï¼ŒFlutterè¿˜åŸºäºè¿™äº›åŸºç¡€èƒ½åŠ›ï¼Œæ ¹æ®Materialå’Œ Cupertinoä¸¤ç§è§†è§‰è®¾è®¡é£æ ¼å°è£…äº†ä¸€å¥—UIç»„ä»¶åº“ã€‚æˆ‘ä»¬åœ¨å¼€å‘Flutterçš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›ç»„ä»¶åº“ã€‚</p>
<h2 id="Flutteræ˜¯æ€ä¹ˆè¿è½¬çš„"><a href="#Flutteræ˜¯æ€ä¹ˆè¿è½¬çš„" class="headerlink" title="Flutteræ˜¯æ€ä¹ˆè¿è½¬çš„?"></a>Flutteræ˜¯æ€ä¹ˆè¿è½¬çš„?</h2><p>Flutterå’Œå…¶ä»–è·¨å¹³å°æ–¹æ¡ˆçš„æœ¬è´¨åŒºåˆ«<br>ä¸ç”¨äºæ„å»ºç§»åŠ¨åº”ç”¨ç¨‹åºçš„å…¶ä»–å¤§å¤šæ•°æ¡†æ¶ä¸åŒï¼ŒFlutteræ˜¯é‡å†™äº†ä¸€æ•´å¥—åŒ…æ‹¬åº•å±‚æ¸²æŸ“é€»è¾‘å’Œä¸Šå±‚å¼€å‘è¯­è¨€ çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚è¿™æ ·ä¸ä»…å¯ä»¥ä¿è¯è§†å›¾æ¸²æŸ“åœ¨Androidå’ŒiOSä¸Šçš„é«˜åº¦ä¸€è‡´æ€§(å³é«˜ä¿çœŸ)ï¼Œåœ¨ä»£ç æ‰§è¡Œ æ•ˆç‡å’Œæ¸²æŸ“æ€§èƒ½ä¸Šä¹Ÿå¯ä»¥åª²ç¾åŸç”ŸAppçš„ä½“éªŒ(å³é«˜æ€§èƒ½)ã€‚è‡ªå·±å®Œæˆäº†ç»„ä»¶æ¸²æŸ“çš„é—­ç¯</p>
<p>React Nativeä¹‹ç±»çš„æ¡†æ¶ï¼Œåªæ˜¯é€šè¿‡JavaScriptè™šæ‹Ÿæœºæ‰©å±•è°ƒç”¨ç³»ç»Ÿç»„ä»¶ï¼Œç”±Androidå’ŒiOSç³»ç»Ÿè¿›è¡Œç»„ä»¶ çš„æ¸²æŸ“;</p>
<p>Flutteræ˜¯æ€ä¹ˆå®Œæˆç»„ä»¶æ¸²æŸ“çš„å‘¢?è¿™éœ€è¦ä»å›¾åƒæ˜¾ç¤ºçš„åŸºæœ¬åŸç†è¯´èµ·ã€‚</p>
<p>åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œå›¾åƒçš„æ˜¾ç¤ºéœ€è¦CPUã€GPUå’Œæ˜¾ç¤ºå™¨ä¸€èµ·é…åˆå®Œæˆ:CPUè´Ÿè´£å›¾åƒæ•°æ®è®¡ç®—ï¼ŒGPUè´Ÿè´£å›¾ åƒæ•°æ®æ¸²æŸ“ï¼Œè€Œæ˜¾ç¤ºå™¨åˆ™è´Ÿè´£æœ€ç»ˆå›¾åƒæ˜¾ç¤ºã€‚</p>
<p>CPUæŠŠè®¡ç®—å¥½çš„ã€éœ€è¦æ˜¾ç¤ºçš„å†…å®¹äº¤ç»™GPUï¼Œç”±GPUå®Œæˆæ¸²æŸ“åæ”¾å…¥å¸§ç¼“å†²åŒºï¼Œéšåè§†é¢‘æ§åˆ¶å™¨æ ¹æ®å‚ç›´åŒ æ­¥ä¿¡å·(VSync)ä»¥æ¯ç§’60æ¬¡çš„é€Ÿåº¦ï¼Œä»å¸§ç¼“å†²åŒºè¯»å–å¸§æ•°æ®äº¤ç”±æ˜¾ç¤ºå™¨å®Œæˆå›¾åƒæ˜¾ç¤ºã€‚</p>
<p>æ“ä½œç³»ç»Ÿåœ¨å‘ˆç°å›¾åƒæ—¶éµå¾ªäº†è¿™ç§æœºåˆ¶ï¼Œè€ŒFlutterä½œä¸ºè·¨å¹³å°å¼€å‘æ¡†æ¶ä¹Ÿé‡‡ç”¨äº†è¿™ç§åº•å±‚æ–¹æ¡ˆã€‚</p>
<p><img src="/2019/08/25/Flutter-UI-Develop/20191115_02.png" alt></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒFlutterå…³æ³¨å¦‚ä½•å°½å¯èƒ½å¿«åœ°åœ¨ä¸¤ä¸ªç¡¬ä»¶æ—¶é’Ÿçš„VSyncä¿¡å·ä¹‹é—´è®¡ç®—å¹¶åˆæˆè§†å›¾æ•°æ®ï¼Œç„¶åé€šè¿‡ Skiaäº¤ç»™GPUæ¸²æŸ“:UIçº¿ç¨‹ä½¿ç”¨Dartæ¥æ„å»ºè§†å›¾ç»“æ„æ•°æ®ï¼Œè¿™äº›æ•°æ®ä¼šåœ¨GPUçº¿ç¨‹è¿›è¡Œå›¾å±‚åˆæˆï¼Œéšåäº¤ç»™ Skiaå¼•æ“åŠ å·¥æˆGPUæ•°æ®ï¼Œè€Œè¿™äº›æ•°æ®ä¼šé€šè¿‡OpenGLæœ€ç»ˆæä¾›ç»™GPUæ¸²æŸ“ã€‚</p>
<h2 id="Skia-æ˜¯ä»€ä¹ˆ"><a href="#Skia-æ˜¯ä»€ä¹ˆ" class="headerlink" title="Skia æ˜¯ä»€ä¹ˆ?"></a>Skia æ˜¯ä»€ä¹ˆ?</h2><p>Skiaæ˜¯ä¸€æ¬¾ç”¨C++å¼€å‘çš„ã€æ€§èƒ½å½ªæ‚çš„2Då›¾åƒç»˜åˆ¶å¼•æ“ï¼Œå…¶å‰èº«æ˜¯ä¸€ä¸ªå‘é‡ç»˜å›¾è½¯ä»¶ã€‚2005å¹´è¢«Googleå…¬ å¸æ”¶è´­åï¼Œå› ä¸ºå…¶å‡ºè‰²çš„ç»˜åˆ¶è¡¨ç°è¢«å¹¿æ³›åº”ç”¨åœ¨Chromeå’ŒAndroidç­‰æ ¸å¿ƒäº§å“ä¸Šã€‚Skiaåœ¨å›¾å½¢è½¬æ¢ã€æ–‡å­—æ¸² æŸ“ã€ä½å›¾æ¸²æŸ“æ–¹é¢éƒ½è¡¨ç°å“è¶Šï¼Œå¹¶æä¾›äº†å¼€å‘è€…å‹å¥½çš„APIã€‚</p>
<p>ç›®å‰ï¼ŒSkiaå·²ç„¶æ˜¯Androidå®˜æ–¹çš„å›¾åƒæ¸²æŸ“å¼•æ“äº†ï¼Œå› æ­¤Flutter Android SDKæ— éœ€å†…åµŒSkiaå¼•æ“å°±å¯ä»¥è·å¾—å¤© ç„¶çš„Skiaæ”¯æŒ;è€Œå¯¹äºiOSå¹³å°æ¥è¯´ï¼Œç”±äºSkiaæ˜¯è·¨å¹³å°çš„ï¼Œå› æ­¤å®ƒä½œä¸ºFlutter iOSæ¸²æŸ“å¼•æ“è¢«åµŒå…¥åˆ°Flutter çš„ iOS SDKä¸­ï¼Œæ›¿ä»£äº†iOSé—­æºçš„Core Graphics/Core Animation/Core Textï¼Œè¿™ä¹Ÿæ­£æ˜¯Flutter iOS SDKæ‰“åŒ… çš„AppåŒ…ä½“ç§¯æ¯”Androidè¦å¤§ä¸€äº›çš„åŸå› ã€‚</p>
<p>åº•å±‚æ¸²æŸ“èƒ½åŠ›ç»Ÿä¸€äº†ï¼Œä¸Šå±‚å¼€å‘æ¥å£å’ŒåŠŸèƒ½ä½“éªŒä¹Ÿå°±éšå³ç»Ÿä¸€äº†ï¼Œå¼€å‘è€…å†ä¹Ÿä¸ç”¨æ“å¿ƒå¹³å°ç›¸å…³çš„æ¸²æŸ“ç‰¹æ€§ äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒSkiaä¿è¯äº†åŒä¸€å¥—ä»£ç è°ƒç”¨åœ¨Androidå’ŒiOSå¹³å°ä¸Šçš„æ¸²æŸ“æ•ˆæœæ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚</p>
<h2 id="Dart-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Dart-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Dart æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Dart æ˜¯ä»€ä¹ˆï¼Ÿ</h2><h3 id="Dart-å†å²"><a href="#Dart-å†å²" class="headerlink" title="Dart å†å²"></a>Dart å†å²</h3><p>2011å¹´10æœˆï¼Œåœ¨ä¸¹éº¦å¬å¼€çš„GOTOå¤§ä¼šä¸Šï¼ŒGoogleå‘å¸ƒäº†ä¸€ç§æ–°çš„ç¼–ç¨‹è¯­è¨€Dartã€‚å¦‚åŒKotlinå’ŒSwiftçš„å‡º ç°ï¼Œåˆ†åˆ«æ˜¯ä¸ºäº†è§£å†³Javaå’ŒObjective-Cåœ¨ç¼–å†™åº”ç”¨ç¨‹åºçš„ä¸€äº›å®é™…é—®é¢˜ä¸€æ ·ï¼ŒDartçš„è¯ç”Ÿæ­£æ˜¯è¦è§£å†³ JavaScriptå­˜åœ¨çš„ã€åœ¨è¯­è¨€æœ¬è´¨ä¸Šæ— æ³•æ”¹è¿›çš„ç¼ºé™·ã€‚</p>
<p>JavaScriptå› ä¸ºNode.jsç„•å‘äº†ç¬¬äºŒæ˜¥ï¼Œè€ŒDartå°±æ²¡æœ‰é‚£ä¹ˆå¥½çš„è¿æ°”äº†ã€‚ç”±äºç¼ºå°‘é¡¶çº§é¡¹ç›®çš„ä½¿ç”¨ï¼ŒDartå§‹ç»ˆ ä¸æ¸©ä¸ç«ã€‚2015å¹´ï¼Œåœ¨å¬å–äº†å¤§é‡å¼€å‘è€…çš„åé¦ˆåï¼ŒGoogleå†³å®šå°†å†…ç½®çš„Dart VMå¼•æ“ä»Chromeç§»é™¤ï¼Œè¿™ å¯¹Dartçš„å‘å±•æ¥è¯´æ˜¯é‡å¤§æŒ«æŠ˜ï¼Œæ›¿ä»£JavaScriptå°±æ›´æ— ä»è°ˆèµ·äº†ã€‚</p>
<p>åœ¨Googleå†…éƒ¨å­µåŒ–äº†ç§»åŠ¨å¼€å‘æ¡†æ¶Flutterï¼Œå¼¯é“è¶…è½¦è¿›å…¥äº†ç§»åŠ¨å¼€å‘çš„é¢† åŸŸ;è€Œåœ¨Googleæœªæ¥çš„æ“ä½œç³»ç»ŸFuchsiaä¸­ï¼ŒDartæ›´æ˜¯è¢«æŒ‡å®šä¸ºå®˜æ–¹çš„å¼€å‘è¯­è¨€ã€‚</p>
<h3 id="Dartçš„ç‰¹æ€§"><a href="#Dartçš„ç‰¹æ€§" class="headerlink" title="Dartçš„ç‰¹æ€§"></a>Dartçš„ç‰¹æ€§</h3><p>æ ¸å¿ƒç‰¹æ€§<br>JITä¸AOTï¼šå€ŸåŠ©äºå…ˆè¿›çš„å·¥å…·é“¾å’Œç¼–è¯‘å™¨ï¼ŒDartæ˜¯å°‘æ•°åŒæ—¶æ”¯æŒJIT(Just In Timeï¼Œå³æ—¶ç¼–è¯‘)å’ŒAOT(Ahead of Timeï¼Œè¿è¡Œå‰ç¼–è¯‘)çš„è¯­è¨€ä¹‹ä¸€ã€‚JITåœ¨è¿è¡Œæ—¶å³æ—¶ç¼–è¯‘ï¼Œåœ¨å¼€å‘å‘¨æœŸä¸­ä½¿ç”¨ï¼Œå¯ä»¥åŠ¨æ€ä¸‹å‘å’Œæ‰§è¡Œä»£ç ï¼Œå¼€å‘æµ‹è¯•æ•ˆç‡é«˜ï¼Œä½†è¿è¡Œé€Ÿåº¦å’Œ æ‰§è¡Œæ€§èƒ½åˆ™ä¼šå› ä¸ºè¿è¡Œæ—¶å³æ—¶ç¼–è¯‘å—åˆ°å½±å“ã€‚AOTå³æå‰ç¼–è¯‘ï¼Œå¯ä»¥ç”Ÿæˆè¢«ç›´æ¥æ‰§è¡Œçš„äºŒè¿›åˆ¶ä»£ç ï¼Œè¿è¡Œé€Ÿåº¦å¿«ã€æ‰§è¡Œæ€§èƒ½è¡¨ç°å¥½ï¼Œä½†æ¯æ¬¡æ‰§è¡Œå‰éƒ½éœ€ è¦æå‰ç¼–è¯‘ï¼Œå¼€å‘æµ‹è¯•æ•ˆç‡ä½ã€‚</p>
<p>å†…å­˜åˆ†é…ä¸åƒåœ¾å›æ”¶ï¼š</p>
<p>Dart VMçš„å†…å­˜åˆ†é…ç­–ç•¥æ¯”è¾ƒç®€å•ï¼Œåˆ›å»ºå¯¹è±¡æ—¶åªéœ€è¦åœ¨å †ä¸Šç§»åŠ¨æŒ‡é’ˆï¼Œå†…å­˜å¢é•¿å§‹ç»ˆæ˜¯çº¿æ€§çš„ï¼Œçœå»äº†æŸ¥ æ‰¾å¯ç”¨å†…å­˜çš„è¿‡ç¨‹ã€‚<br>åœ¨Dartä¸­ï¼Œå¹¶å‘æ˜¯é€šè¿‡Isolateå®ç°çš„ã€‚Isolateæ˜¯ç±»ä¼¼äºçº¿ç¨‹ä½†ä¸å…±äº«å†…å­˜ï¼Œç‹¬ç«‹è¿è¡Œçš„workerã€‚è¿™æ ·çš„æœº åˆ¶ï¼Œå°±å¯ä»¥è®©Dartå®ç°æ— é”çš„å¿«é€Ÿåˆ†é…ã€‚</p>
<p>Dartçš„åƒåœ¾å›æ”¶ï¼Œåˆ™æ˜¯é‡‡ç”¨äº†å¤šç”Ÿä»£ç®—æ³•ã€‚æ–°ç”Ÿä»£åœ¨å›æ”¶å†…å­˜æ—¶é‡‡ç”¨â€œåŠç©ºé—´â€æœºåˆ¶ï¼Œè§¦å‘åƒåœ¾å›æ”¶æ—¶ï¼Œ Dartä¼šå°†å½“å‰åŠç©ºé—´ä¸­çš„â€œæ´»è·ƒâ€å¯¹è±¡æ‹·è´åˆ°å¤‡ç”¨ç©ºé—´ï¼Œç„¶åæ•´ä½“é‡Šæ”¾å½“å‰ç©ºé—´çš„æ‰€æœ‰å†…å­˜ã€‚å›æ”¶è¿‡ç¨‹ä¸­ï¼Œ Dartåªéœ€è¦æ“ä½œå°‘é‡çš„â€œæ´»è·ƒâ€å¯¹è±¡ï¼Œæ²¡æœ‰å¼•ç”¨çš„å¤§é‡â€œæ­»äº¡â€å¯¹è±¡åˆ™è¢«å¿½ç•¥ï¼Œè¿™æ ·çš„å›æ”¶æœºåˆ¶å¾ˆé€‚åˆ Flutteræ¡†æ¶ä¸­å¤§é‡Widgeté”€æ¯é‡å»ºçš„åœºæ™¯ã€‚</p>
<p>å•çº¿ç¨‹æ¨¡å‹ï¼šDartä¸­å¹¶æ²¡æœ‰çº¿ç¨‹ï¼Œåªæœ‰Isolate(éš”ç¦»åŒº)ã€‚Isolatesä¹‹é—´ä¸ä¼šå…±äº«å†…å­˜ï¼Œå°±åƒå‡ ä¸ªè¿è¡Œåœ¨ä¸åŒè¿›ç¨‹ ä¸­çš„workerï¼Œé€šè¿‡äº‹ä»¶å¾ªç¯(Event Looper)åœ¨äº‹ä»¶é˜Ÿåˆ—(Event Queue)ä¸Šä¼ é€’æ¶ˆæ¯é€šä¿¡ã€‚</p>
<p>æ— éœ€å•ç‹¬çš„å£°æ˜å¼å¸ƒå±€è¯­è¨€ï¼Œç•Œé¢å¸ƒå±€ç›´æ¥é€šè¿‡Dartç¼–ç æ¥å®šä¹‰ï¼Œä½¿å¾—Flutterå¹¶ä¸éœ€è¦ç±»ä¼¼JSXæˆ–XMLçš„å£°æ˜å¼å¸ƒå±€è¯­è¨€ã€‚æ‰€æœ‰çš„å¸ƒ å±€éƒ½ä½¿ç”¨åŒä¸€ç§æ ¼å¼ï¼Œä¹Ÿä½¿å¾—Flutterå¾ˆå®¹æ˜“æä¾›é«˜çº§å·¥å…·ä½¿å¸ƒå±€æ›´ç®€å•ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆæ˜¯Dart"><a href="#ä¸ºä»€ä¹ˆæ˜¯Dart" class="headerlink" title="ä¸ºä»€ä¹ˆæ˜¯Dart?"></a>ä¸ºä»€ä¹ˆæ˜¯Dart?</h3><p>Googleå…¬å¸ç»™å‡ºçš„åŸå› å¾ˆç®€å•ä¹Ÿå¾ˆç›´æ¥:Dartè¯­è¨€å¼€å‘ç»„å°±åœ¨éš”å£ï¼Œå¯¹äºFlutteréœ€è¦çš„ä¸€äº›è¯­è¨€æ–°ç‰¹ æ€§ï¼Œèƒ½å¤Ÿå¿«é€Ÿåœ¨è¯­æ³•å±‚é¢è½åœ°å®ç°;è€Œå¦‚æœé€‰æ‹©äº†JavaScriptï¼Œå°±å¿…é¡»ç»è¿‡å„ç§å§”å‘˜ä¼šå’Œæµè§ˆå™¨æä¾›å•†æ¼«é•¿çš„å†³è®®ã€‚</p>
<ul>
<li>åŒæ—¶æ”¯æŒå³æ—¶ç¼–è¯‘JITå’Œäº‹å‰ç¼–è¯‘AOT</li>
<li>Dartçš„å­¦ä¹ æˆæœ¬å¹¶ä¸é«˜ï¼Œå¾ˆå®¹æ˜“ä¸Šæ‰‹ï¼ŒDartä½œä¸ºä¸€é—¨ç°ä»£åŒ–è¯­è¨€ï¼Œé›†ç™¾å®¶ä¹‹é•¿ï¼Œæ‹¥æœ‰å…¶ä»–ä¼˜ç§€ç¼–ç¨‹è¯­è¨€çš„è¯¸å¤šç‰¹æ€§</li>
<li>åˆ©ç”¨ç‹¬ç‰¹çš„éš”ç¦»åŒºï¼ˆIsolateï¼‰å®ç°å¤šçº¿ç¨‹ã€‚è€Œä¸”ä¸å…±äº«å†…å­˜ï¼Œé¿å…äº†æŠ¢å å¼è°ƒåº¦å’Œå…±äº«å†…å­˜ï¼Œå¯ä»¥åœ¨æ²¡æœ‰é”çš„æƒ…å†µä¸‹è¿›è¡Œå¯¹è±¡åˆ†é…å’Œåƒåœ¾å›æ”¶ï¼Œåœ¨æ€§èƒ½æ–¹é¢è¡¨ç°ç›¸å½“ä¸é”™ã€‚</li>
<li>åˆ›å»ºçš„å¯¹è±¡åˆ†é…å†…å­˜æ—¶ï¼ŒDart æ˜¯åœ¨ç°æœ‰çš„å †ä¸Šç§»åŠ¨æŒ‡é’ˆï¼Œä¿è¯å†…å­˜çš„å¢é•¿æ˜¯ç¨‹çº¿æ€§çš„ï¼Œäºæ˜¯å°±çœäº†æŸ¥æ‰¾å¯ç”¨å†…å­˜çš„è¿‡ç¨‹ã€‚</li>
<li>googleçš„æ”¯æŒ</li>
</ul>
<h2 id="Flutter-è§†å›¾æ ‘ç»“æ„"><a href="#Flutter-è§†å›¾æ ‘ç»“æ„" class="headerlink" title="Flutter è§†å›¾æ ‘ç»“æ„"></a>Flutter è§†å›¾æ ‘ç»“æ„</h2><p>Flutter çš„è§†å›¾ç»“æ„çš„æŠ½è±¡åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šWidget, Element, RenderObject</p>
<p><img src="/2019/08/25/Flutter-UI-Develop/20191115_03.png" alt></p>
<p>Widgetï¼šWidget é‡Œé¢å­˜å‚¨äº†ä¸€ä¸ªè§†å›¾çš„é…ç½®ä¿¡æ¯ï¼Œå¯ä»¥é«˜æ•ˆçš„åˆ›å»ºï¼ˆbuildï¼‰å’Œé”€æ¯<br>Elementï¼šæ˜¯åˆ†ç¦» WidgetTree å’ŒçœŸæ­£çš„æ¸²æŸ“å¯¹è±¡çš„ä¸­é—´å±‚ï¼Œ WidgetTree ç”¨æ¥æè¿°å¯¹åº”çš„Element å±æ€§<br>RenderObjectï¼šæ¥æ‰§è¡Œ Diffï¼Œ Hit Test å¸ƒå±€ã€ç»˜åˆ¶</p>
<h2 id="è§†å›¾æ ‘çš„æ“ä½œ"><a href="#è§†å›¾æ ‘çš„æ“ä½œ" class="headerlink" title="è§†å›¾æ ‘çš„æ“ä½œ"></a>è§†å›¾æ ‘çš„æ“ä½œ</h2><h3 id="åˆ›å»ºæ ‘"><a href="#åˆ›å»ºæ ‘" class="headerlink" title="åˆ›å»ºæ ‘"></a>åˆ›å»ºæ ‘</h3><p><img src="/2019/08/25/Flutter-UI-Develop/20191115_04.png" alt></p>
<p>åˆ›å»ºæ ‘çš„è¿‡ç¨‹ï¼šåˆ›å»ºwidgetæ ‘ -&gt; è°ƒç”¨runApp(rootWidget)ï¼Œå°†rootWidgetä¼ ç»™rootElement,åšä¸ºrootElementçš„å­èŠ‚ç‚¹ï¼Œç”ŸæˆElementæ ‘ï¼Œç”±Elementæ ‘ç”ŸæˆRenderæ ‘</p>
<p>Widgetï¼šå­˜æ”¾æ¸²æŸ“å†…å®¹ã€è§†å›¾å¸ƒå±€ä¿¡æ¯ï¼Œwidgetçš„å±æ€§æœ€å¥½éƒ½æ˜¯immutable<br>Elementï¼šå­˜æ”¾ä¸Šä¸‹æ–‡ï¼Œé€šè¿‡Elementéå†è§†å›¾æ ‘ï¼ŒElementåŒæ—¶æŒæœ‰Widgetå’ŒRenderObject<br>RenderObjectï¼šæ ¹æ®Widgetçš„å¸ƒå±€å±æ€§è¿›è¡Œlayoutï¼Œpaint Widgetä¼ äººçš„å†…å®¹</p>
<h3 id="æ›´æ–°æ ‘"><a href="#æ›´æ–°æ ‘" class="headerlink" title="æ›´æ–°æ ‘"></a>æ›´æ–°æ ‘</h3><p>widgetåªæ˜¯ä¸€ä¸ªé…ç½®æ•°æ®ç»“æ„ï¼Œåˆ›å»ºæ˜¯éå¸¸è½»é‡çš„ï¼ŒåŠ ä¸Šflutterå›¢é˜Ÿå¯¹widgetçš„åˆ›å»º/é”€æ¯åšäº†ä¼˜åŒ–ï¼Œä¸ç”¨æ‹…å¿ƒæ•´ä¸ªwidgetæ ‘é‡æ–°åˆ›å»ºæ‰€å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ï¼Œä½†æ˜¯renderobjectå°±ä¸ä¸€æ ·äº†ï¼Œrenderobjectæ¶‰åŠåˆ°layoutã€paintç­‰å¤æ‚æ“ä½œï¼Œæ˜¯ä¸€ä¸ªçœŸæ­£æ¸²æŸ“çš„viewï¼Œæ•´ä¸ªview æ ‘é‡æ–°åˆ›å»ºå¼€é”€å°±æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚</p>
<h3 id="æ ‘çš„æ›´æ–°è§„åˆ™"><a href="#æ ‘çš„æ›´æ–°è§„åˆ™" class="headerlink" title="æ ‘çš„æ›´æ–°è§„åˆ™"></a>æ ‘çš„æ›´æ–°è§„åˆ™</h3><ul>
<li>æ‰¾åˆ°widgetå¯¹åº”çš„elementèŠ‚ç‚¹ï¼Œè®¾ç½®elementä¸ºdirtyï¼Œè§¦å‘drawframe, drawframeä¼šè°ƒç”¨elementçš„<code>performRebuild()</code>è¿›è¡Œæ ‘é‡å»º</li>
<li><code>widget.build() == null, deactive element.child</code> åˆ é™¤å­æ ‘ï¼Œæµç¨‹ç»“æŸ</li>
<li><code>element.child.widget == NULL, mount</code> çš„æ–°å­æ ‘ï¼Œæµç¨‹ç»“æŸ</li>
<li><code>element.child.widget == widget.build()</code> æ— éœ€é‡å»ºï¼Œå¦åˆ™è¿›å…¥æµç¨‹5</li>
<li><code>Widget.canUpdate(element.child.widget, newWidget) == true</code> æ›´æ–°childçš„slotï¼Œelement.child.update(newWidget)(å¦‚æœchildè¿˜æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™é€’å½’ä¸Šé¢çš„æµç¨‹è¿›è¡Œå­æ ‘æ›´æ–°),æµç¨‹ç»“æŸï¼Œå¦åˆ™è½¬6</li>
<li><code>Widget.canUpdate(element.child.widget, newWidget) ï¼= true</code>ï¼ˆwidgetçš„classtype æˆ–è€… key ä¸ç›¸ç­‰ï¼‰ï¼Œdeactivew element.childï¼Œmount æ–°å­æ ‘</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼š<br><code>element.child.widget == widget.build()</code>,ä¸ä¼šè§¦å‘å­æ ‘çš„updateï¼Œå½“è§¦å‘updateçš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰ç”Ÿæ•ˆï¼Œè¦æ³¨æ„widgetæ˜¯å¦ä½¿ç”¨æ—§widgetï¼Œæ²¡æœ‰new widgetï¼Œå¯¼è‡´updateæµç¨‹èµ°åˆ°è¯¥widgetå°±åœæ­¢äº†<br>å­æ ‘çš„æ·±åº¦å˜åŒ–ï¼Œä¼šå¼•èµ·å­æ ‘é‡å»ºï¼Œå¦‚æœå­æ ‘æ˜¯ä¸€ä¸ªå¤æ‚åº¦å¾ˆé«˜çš„æ ‘ï¼Œå¯ä»¥ä½¿ç”¨GlobalKeyåšä¸ºå­æ ‘widgetçš„keyã€‚GlobalKeyå…·æœ‰ç¼“å­˜åŠŸèƒ½</p>
</blockquote>
<h3 id="å¦‚ä½•è§¦å‘æ ‘æ›´æ–°"><a href="#å¦‚ä½•è§¦å‘æ ‘æ›´æ–°" class="headerlink" title="å¦‚ä½•è§¦å‘æ ‘æ›´æ–°"></a>å¦‚ä½•è§¦å‘æ ‘æ›´æ–°</h3><p>å…¨å±€æ›´æ–°ï¼šè°ƒç”¨<code>runApp(rootWidget)</code>ï¼Œä¸€èˆ¬flutterå¯åŠ¨æ—¶è°ƒç”¨åä¸å†ä¼šè°ƒç”¨<br>å±€éƒ¨å­æ ‘æ›´æ–°, å°†è¯¥å­æ ‘åšStatefullWidgetçš„ä¸€ä¸ªå­widgetï¼Œå¹¶åˆ›å»ºå¯¹åº”çš„Stateç±»å®ä¾‹ï¼Œé€šè¿‡è°ƒç”¨state.setState() è§¦å‘è¯¥å­æ ‘çš„åˆ·æ–°</p>
<h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h2><p><img src="/2019/08/25/Flutter-UI-Develop/20191115_05.png" alt></p>
<ul>
<li><code>initState()</code>: state createä¹‹åè¢«insertåˆ°treeæ—¶è°ƒç”¨çš„</li>
<li><code>didUpdateWidget(newWidget)</code>:ç¥–å…ˆèŠ‚ç‚¹rebuild widgetæ—¶è°ƒç”¨</li>
<li><code>deactivate()</code>:widgetè¢«removeçš„æ—¶å€™è°ƒç”¨ï¼Œä¸€ä¸ªwidgetä»treeä¸­removeæ‰ï¼Œå¯ä»¥åœ¨disposeæ¥å£è¢«è°ƒç”¨å‰ï¼Œé‡æ–°instertåˆ°ä¸€ä¸ªæ–°treeä¸­</li>
<li><code>didChangeDependencies()</code>:</li>
<li>åˆå§‹åŒ–æ—¶ï¼Œåœ¨<code>initState()</code>ä¹‹åç«‹åˆ»è°ƒç”¨</li>
<li>å½“ä¾èµ–çš„InheritedWidget rebuild,ä¼šè§¦å‘æ­¤æ¥å£è¢«è°ƒç”¨</li>
<li><code>build()</code>:</li>
<li>After calling [initState].</li>
<li>After calling [didUpdateWidget].</li>
<li>After receiving a call to [setState].</li>
<li>After a dependency of this [State] object changes (e.g., an[InheritedWidget] referenced by the previous [build] changes).</li>
<li>After calling [deactivate] and then reinserting the [State] object into the tree at another location.</li>
<li><code>dispose()</code>:Widgetå½»åº•é”€æ¯æ—¶è°ƒç”¨</li>
<li><code>reassemble()</code>: hot reloadè°ƒç”¨</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼š<br>Aé¡µé¢pushä¸€ä¸ªæ–°çš„é¡µé¢B,Aé¡µé¢çš„widgetæ ‘ä¸­çš„æ‰€æœ‰stateä¼šä¾æ¬¡è°ƒç”¨<code>deactivate()</code>, <code>didUpdateWidget(newWidget)</code>ã€<code>build()</code>ï¼ˆè¿™é‡Œæ€€ç–‘æ˜¯bugï¼ŒAé¡µé¢pushä¸€ä¸ªæ–°é¡µé¢ï¼Œç†è®ºä¸Šå¹¶æ²¡æœ‰å°†Aé¡µé¢è¿›è¡Œremoveæ“ä½œï¼‰ï¼Œå½“ç„¶ä»åŠŸèƒ½ä¸Šï¼Œæ²¡æœ‰çœ‹å‡ºæ¥æœ‰ä»€ä¹ˆå¼‚å¸¸<br>å½“ListViewä¸­çš„itemæ»šåŠ¨å‡ºå¯æ˜¾ç¤ºåŒºåŸŸçš„æ—¶å€™ï¼Œitemä¼šè¢«ä»æ ‘ä¸­removeæ‰ï¼Œæ­¤itemå­æ ‘ä¸­æ‰€æœ‰çš„stateéƒ½ä¼šè¢«disposeï¼Œstateè®°å½•çš„æ•°æ®éƒ½ä¼šé”€æ¯ï¼Œitemæ»šåŠ¨å›å¯æ˜¾ç¤ºåŒºåŸŸæ—¶ï¼Œä¼šé‡æ–°åˆ›å»ºå…¨æ–°çš„stateã€elementã€renderobject<br>ä½¿ç”¨hot reloadåŠŸèƒ½æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„stateå®ä¾‹æ˜¯æ²¡æœ‰é‡æ–°åˆ›å»ºçš„ï¼Œå¦‚æœè¯¥stateä¸­å­˜åœ¨ä¸€ä¸‹å¤æ‚çš„èµ„æºæ›´æ–°éœ€è¦é‡æ–°åŠ è½½æ‰èƒ½ç”Ÿæ•ˆï¼Œé‚£ä¹ˆéœ€è¦åœ¨<code>reassemble()</code>æ·»åŠ å¤„ç†ï¼Œä¸ç„¶å½“ä½ ä½¿ç”¨hot reloadæ—¶å€™å¯èƒ½ä¼šå‡ºç°ä¸€äº›æ„æƒ³ä¸åˆ°çš„ç»“æœï¼Œä¾‹å¦‚ï¼Œè¦å°†æ˜¾ç¤ºæœ¬åœ°æ–‡ä»¶çš„å†…å®¹åˆ°å±å¹•ä¸Šï¼Œå½“ä½ å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ›¿æ¢äº†æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œä½†æ˜¯hot reloadæ²¡æœ‰è§¦å‘é‡æ–°è¯»å–æ–‡ä»¶å†…å®¹ï¼Œé¡µé¢æ˜¾ç¤ºè¿˜æ˜¯åŸæ¥çš„æ—§å†…å®¹</p>
</blockquote>
<h2 id="æ•°æ®æµè½¬"><a href="#æ•°æ®æµè½¬" class="headerlink" title="æ•°æ®æµè½¬"></a>æ•°æ®æµè½¬</h2><h3 id="ä»ä¸Šå¾€ä¸‹"><a href="#ä»ä¸Šå¾€ä¸‹" class="headerlink" title="ä»ä¸Šå¾€ä¸‹"></a>ä»ä¸Šå¾€ä¸‹</h3><p>InheritedWidgetç”¨äºå­èŠ‚ç‚¹å‘ç¥–å…ˆèŠ‚ç‚¹è·å–æ•°æ®çš„æœºåˆ¶</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FrogColor</span> <span class="keyword">extends</span> <span class="title">InheritedWidget</span> </span>&#123;</span><br><span class="line">   <span class="keyword">const</span> FrogColor(&#123;</span><br><span class="line">     Key key,</span><br><span class="line">     <span class="meta">@required</span> <span class="keyword">this</span>.color,</span><br><span class="line">     <span class="meta">@required</span> Widget child,</span><br><span class="line">   &#125;) : <span class="keyword">assert</span>(color != <span class="keyword">null</span>),</span><br><span class="line">        <span class="keyword">assert</span>(child != <span class="keyword">null</span>),</span><br><span class="line">        <span class="keyword">super</span>(key: key, child: child);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">final</span> Color color;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">static</span> FrogColor of(BuildContext context) &#123;</span><br><span class="line">     <span class="keyword">return</span> context.inheritFromWidgetOfExactType(FrogColor);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@override</span></span><br><span class="line">   <span class="built_in">bool</span> updateShouldNotify(FrogColor old) =&gt; color != old.color;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>child åŠå…¶ä»¥ä¸‹çš„èŠ‚ç‚¹å¯ä»¥é€šè¿‡è°ƒç”¨ä¸‹é¢çš„æ¥å£è¯»å–coloræ•°æ®ï¼šFrogColor.of(context).color<br>context.inheritFromWidgetOfExactType(FrogColor) å…¶å®æ˜¯é€šè¿‡context/elementå¾€ä¸Šéå†æ ‘ï¼ŒæŸ¥æ‰¾åˆ°ç¬¬ä¸€ä¸ªFrogColorçš„ç¥–å…ˆèŠ‚ç‚¹ï¼Œå–è¯¥èŠ‚ç‚¹çš„widgetå¯¹è±¡</p>
<h3 id="ä»ä¸‹å¾€ä¸Š"><a href="#ä»ä¸‹å¾€ä¸Š" class="headerlink" title="ä»ä¸‹å¾€ä¸Š"></a>ä»ä¸‹å¾€ä¸Š</h3><p>é€šè¿‡å‘é€é€šçŸ¥çš„æ–¹å¼</p>
<ul>
<li>å®šä¹‰é€šçŸ¥ç±»ï¼Œç»§æ‰¿è‡³Notification</li>
<li>çˆ¶èŠ‚ç‚¹ä½¿ç”¨NotificationListener è¿›è¡Œç›‘å¬æ•è·é€šçŸ¥</li>
<li>å­èŠ‚ç‚¹æœ‰æ•°æ®å˜æ›´è°ƒç”¨ä¸‹é¢æ¥å£è¿›è¡Œæ•°æ®ä¸ŠæŠ¥</li>
<li><code>Notification(data).dispatch(context)</code></li>
</ul>
<p>æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="/2019/08/25/Flutter-UI-Develop/20191115_06.png" alt></p>
<h2 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h2><h3 id="Size-è®¡ç®—"><a href="#Size-è®¡ç®—" class="headerlink" title="Size è®¡ç®—"></a>Size è®¡ç®—</h3><p>parentä¼ å…¥çº¦æŸæ¡ä»¶ï¼Œåœ¨dramframeçš„layouté˜¶æ®µï¼Œchildæ ¹æ®è‡ªèº«çš„æ¸²æŸ“å†…å®¹è¿”å›sizeã€‚ä½†æ˜¯ï¼Œæœ‰ä¸ªé—®é¢˜ï¼Œåœ¨build()é˜¶æ®µè·å–ä¸åˆ°sizeï¼Œå¾ˆå¤šæ—¶å€™éœ€è¦æå‰çŸ¥é“éƒ¨åˆ†widget sizeæ¥è¿›è¡Œå¸ƒå±€ï¼Œè§£å†³æ–¹æ¡ˆå½“widget åœ¨å¯¹åº”renderobjectçš„layouté˜¶æ®µä¹‹åï¼Œå‘é€ä¸€ä¸ªLayoutChangeNotification,å‚è€ƒSizeChangedLayoutNotifier classï¼Œä½†æ˜¯SizeChangedLayoutNotifieræ²¡æœ‰ä¸ŠæŠ¥init layout sizeï¼Œå¯ä»¥è‡ªå·±å‚è€ƒè¿™ä¸ªå®ç°å°è£…ä¸€ä¸ªNotifier</p>
<h3 id="Offset-è®¡ç®—"><a href="#Offset-è®¡ç®—" class="headerlink" title="Offset è®¡ç®—"></a>Offset è®¡ç®—</h3><p>renderObjectæ‹¿åˆ°è®¡ç®—å¥½çš„sizeï¼Œå†åŠ ä¸Šä¸€äº›å¸ƒå±€å±æ€§ï¼ˆalignã€paddigï¼‰ç­‰ï¼Œè®¡ç®—childç›¸å¯¹parentçš„offsetï¼›offsetå­˜æ”¾åœ¨æ¯ä¸ªchild renderObjectçš„BoxParentDataä¸­ï¼›å½“parentæ‹¥æœ‰mutil childrenæ—¶ï¼ŒBoxParentDataè¿˜ç”¨æ¥å­˜childrenå…„å¼ŸèŠ‚ç‚¹ä¹‹é—´çš„éå†é¡ºåº</p>
<h3 id="Relayout-boundary"><a href="#Relayout-boundary" class="headerlink" title="Relayout boundary"></a>Relayout boundary</h3><p>renderObjectåœ¨layouté˜¶æ®µåšäº†Relayout boundaryçš„ä¼˜åŒ–ï¼Œå½“å­æ ‘è¿›è¡Œrelayoutæ—¶ï¼Œæ»¡è¶³ä¸‹é¢ä¸‰ç§ä¸­çš„ä¸€ç§</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">parentUsesSize == false</span><br><span class="line">sizedByParent == true</span><br><span class="line">constraints.isTight</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆè¯¥renderObjectè®¾ç½®ä¸ºRelayout boundaryï¼Œä¹Ÿå°±æ˜¯è¯¥renderObjectçš„é‡æ–°layoutä¸è§¦å‘parentçš„layoutï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¼€å‘äººå‘˜ä¸éœ€è¦å…³å¿ƒRelayout boundaryï¼Œé™¤éæ˜¯ä½¿ç”¨CustomMultiChildLayoutã€‚</p>
<h2 id="æœ¬æ–‡å®Œ"><a href="#æœ¬æ–‡å®Œ" class="headerlink" title="æœ¬æ–‡å®Œ"></a>æœ¬æ–‡å®Œ</h2>]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
</search>
